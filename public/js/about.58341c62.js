(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"0549":function(e,t,s){"use strict";s("fc46")},"0996":function(e,t,s){"use strict";s("2c60")},1511:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-row",{staticClass:"m-0",attrs:{tag:"main",id:"User"}},[s("b-col",{staticClass:"text-center sr-only",attrs:{tag:"h1",cols:"12"}},[s("span",{staticClass:"sr-only"},[e._v("Profile de ")]),e._v(" "+e._s(e.oneUser.user_name)+" ")]),s("b-col",{attrs:{tag:"section",cols:"12",lg:"8",order:"1","order-lg":"0"}},[s("h2",{staticClass:"sr-only"},[e._v("Les derniers posts de "+e._s(e.oneUser.user_name))]),e._l(e.allPosts,(function(e){return s("Post",{key:e.id,attrs:{post:e}})})),e.allPosts.length&&e.allPosts.length<e.postPagination.totalPosts?s("LazyLoadingScroll",{on:{loadMore:function(t){return e.fetchAllPostsByOneUser({page:t,id:e.$route.params.id})}}}):s("p",[e._v("Fin des posts")])],2),s("b-col",{staticClass:"h-100 d-flex flex-column justify-start align-items-center mb-4",attrs:{tag:"aside",cols:"12",lg:"4"}},[s("b-card",{staticClass:"w-100 align-items-center border-0 shadow mb-4"},[e.oneUser.image_url?s("b-avatar",{staticClass:"mb-3 bg-transparent",attrs:{src:e.oneUser.image_url,size:"150px"}}):e._e(),s("h2",{staticClass:"mb-3 text-center"},[e._v(e._s(e.oneUser.user_name))]),s("b-button",{staticClass:"btn-dark text-white",attrs:{to:"/chat"}},[e._v("Envoyer un message")])],1),s("b-card",{staticClass:"w-100 align-items-center border-0 shadow",attrs:{"body-class":"w-100 p-4"}},[s("h2",{staticClass:"h3 text-center"},[e._v("Sujets suivis")]),s("b-list-group",{staticClass:"px-4 list-unstyled",attrs:{tag:"ul"}},[s("li",e._l(e.oneUser.Subjects,(function(e,t){return s("subject",{key:t,staticClass:"text-dark p-0 text-left",attrs:{subject:e,fill:!0}})})),1)])],1)],1)],1)},r=[],n=s("5530"),i=s("9c93"),o=s("fa7e"),l=s("ffa7"),c=s("2f62"),u={name:"User",components:{Post:i["a"],Subject:o["a"],LazyLoadingScroll:l["a"]},watch:{$route:function(e){this.fetchUser(e.params.id),this.fetchAllPostsByOneUser({page:0,id:e.params.id})}},computed:Object(n["a"])({},Object(c["c"])(["oneUser","userId","allPosts","postPagination"])),methods:Object(n["a"])({},Object(c["b"])(["fetchUser","getFollows","fetchAllPostsByOneUser"])),mounted:function(){this.fetchUser(this.$route.params.id),this.getFollows(this.userId),this.fetchAllPostsByOneUser({page:0,id:this.$route.params.id})}},d=u,m=s("2877"),b=Object(m["a"])(d,a,r,!1,null,null,null);t["default"]=b.exports},"1a6b":function(e,t,s){"use strict";s("8140")},"23ad":function(e,t,s){!function(t,s){e.exports=s()}(0,(function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(t,s,a){var r=s.prototype,n=r.format;a.en.formats=e,r.format=function(t){void 0===t&&(t="YYYY-MM-DDTHH:mm:ssZ");var s=this.$locale().formats,a=function(t,s){return t.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,a,r){var n=r&&r.toUpperCase();return a||s[r]||e[r]||s[n].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,s){return t||s.slice(1)}))}))}(t,void 0===s?{}:s);return n.call(this,a)}}}))},"251e":function(e,t,s){"use strict";s("6fbb")},2532:function(e,t,s){"use strict";var a=s("23e7"),r=s("5a34"),n=s("1d80"),i=s("ab13");a({target:"String",proto:!0,forced:!i("includes")},{includes:function(e){return!!~String(n(this)).indexOf(r(e),arguments.length>1?arguments[1]:void 0)}})},"293a":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-row",{staticClass:"rounded-lg shadow h-100",attrs:{tag:"main",id:"chat"}},[s("b-col",{staticClass:"h-100 border-right flex-column justify-content-between",class:{"d-none d-lg-flex":e.currentConversation,"d-flex":!e.currentConversation},attrs:{cols:"12",lg:"4"}},[s("div",{staticClass:"d-flex justify-content-between align-items-center p-2"},[s("h1",{staticClass:"h3"},[e._v("Discussions")]),s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.onlineUsers",modifiers:{onlineUsers:!0}}],staticClass:"bg-transparent border-0"},[s("b-icon-pencil-square",{staticClass:"text-dark",attrs:{"aria-label":"Démarrer une conversation avec un collègue","font-scale":"1.5"}})],1),s("b-modal",{attrs:{id:"onlineUsers",title:"Avec qui voulez-vous discutter ?","hide-footer":"",centered:"",scrollable:"","content-class":"h-100"}},[s("ChatUser",{on:{conversationCreated:function(t){return e.$bvModal.hide("onlineUsers")}}})],1)],1),s("ChatConversations")],1),0!==e.currentConversation?s("b-col",{staticClass:"h-100 d-flex flex-column justify-content-between align-items-stretch"},[s("ChatHeader"),s("ChatMessages"),s("form",{staticClass:"d-flex justify-content-between align-items-center position-relative",on:{submit:e.sendMessage}},[s("b-form-input",{staticClass:"my-3 w-100",attrs:{"aria-label":"Envoyer un nouveau message"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),s("b-button",{staticClass:"input__btn",attrs:{type:"submit",variant:"link"}},[e._v("Envoyer")])],1)],1):s("b-col",{staticClass:"h-100 d-none d-lg-flex flex-column justify-content-center align-items-center"},[s("h2",[e._v("Vos messages")]),s("p",[e._v("Créer une nouvelle conversation avec vos collègues ")]),s("b-button",{attrs:{variant:"dark",pill:""},on:{click:function(t){return e.$bvModal.show("onlineUsers")}}},[e._v(" Créer une conversation ")])],1)],1)},r=[],n=s("5530"),i=s("3835"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"h-100 d-flex flex-column justify-between align-items-stretch"},[s("b-list-group",{staticClass:"overflow-y-auto overflow-x-hidden",attrs:{id:"onlineUsersList"}},e._l(e.allOtherUsers,(function(t,a){return s("b-list-group-item",{key:a,staticClass:"border-0 rounded-pill text-dark d-flex justify-content-start align-items-center",class:{active:e.selectedUser===t.id},attrs:{href:"#"},on:{click:function(s){e.selectedUser=t.id}}},[s("b-avatar",{staticClass:"mr-3 bg-transparent",attrs:{badge:e.isOnline(t.id),"badge-variant":"success",src:t.image_url,size:"3.5rem"}}),s("div",[s("p",{staticClass:"m-0 h5"},[e._v(e._s(t.user_name))])])],1)})),1),s("div",{staticClass:"mt-2 w-100"},[s("b-button",{staticClass:"d-block mx-auto",attrs:{variant:"success",size:"lg"},on:{"~click":function(t){return e.handleSubmit()}}},[e._v(" Démarrer une conversation ")])],1)],1)},l=[],c=(s("4de4"),s("2f62")),u={name:"ChatUser",data:function(){return{selectedUser:""}},computed:Object(n["a"])(Object(n["a"])({},Object(c["c"])(["userId","allUsers","allOnlineUsers"])),{},{allOtherUsers:function(){var e=this;return this.allUsers.filter((function(t){return t.id!==e.userId}))}}),methods:Object(n["a"])(Object(n["a"])({},Object(c["b"])(["createConversation"])),{},{isOnline:function(e){var t=this.allOnlineUsers.filter((function(t){return t.userId===e}));return t.length>0},handleSubmit:function(){var e=this;this.createConversation([this.selectedUser,this.userId]).then((function(){return e.$emit("conversationCreated")}))}})},d=u,m=(s("5d90"),s("2877")),b=Object(m["a"])(d,o,l,!1,null,"ce313674",null),f=b.exports,p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pt-0 px-sm-3 px-md-4 d-flex flex-column justify-content-end align-items-stretch",attrs:{id:"chatMessages"}},[e.conversation.Messages.length&&e.conversation.Messages.length<e.conversation.totalMessages?s("LazyLoadingScroll",{on:{loadMore:function(t){return e.handleLoading(t)}}}):s("p",{staticClass:"text-center my-4 text-muted"},[e._v(" "+e._s(e.conversation.Messages.length>0?"Fin des messages":"Cette conversation ne contient aucun message")+" ")]),e._l(e.conversation.Messages,(function(t,a){return s("p",{key:a,staticClass:"d-flex flex-column justify-content-center align-items-start"},[s("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"bg-light px-4 py-2 rounded-pill w-auto text-break mw-70",class:{"message-sent":t.UserId===e.userId},attrs:{title:e.formatDate(t.createdAt)}},[e._v(" "+e._s(t.content)+" ")]),e.lastMessageSent&&e.lastMessageSent.id===t.id&&!0===t.read&&t.UserId===e.userId?s("span",{staticClass:"align-self-end"},[s("b-icon-check-all"),s("small",[e._v(" vu le "+e._s(e.formatDate(t.updatedAt))+" ")])],1):e._e(),a===e.conversation.Messages.length-1&&!1===t.read&&t.UserId===e.userId?s("span",{staticClass:"align-self-end"},[s("b-icon-check"),s("small",[e._v(" envoyé le "+e._s(e.formatDate(t.createdAt))+" ")])],1):e._e()])}))],2)},v=[],h=(s("fb6a"),s("ffa7")),g=s("5a0c"),_=s.n(g),C=s("e5b7"),x=s.n(C),w=s("23ad"),k=s.n(w);_.a.extend(k.a),_.a.locale(x.a);var j={name:"ChatMessages",components:{LazyLoadingScroll:h["a"]},data:function(){return{down:!0}},watch:{currentConversation:function(){this.down=!0}},computed:Object(n["a"])(Object(n["a"])({},Object(c["c"])(["userId","allConversations","currentConversation","socket"])),{},{conversation:function(){var e=this;return this.allConversations.filter((function(t){return t.id===e.currentConversation}))[0]},lastMessageSent:function(){var e=this,t=this.conversation.Messages.filter((function(t){return t.UserId===e.userId})),s=t.slice().sort((function(e,t){return _()(t.createdAt).unix()-_()(e.createdAt).unix()})),a=Object(i["a"])(s,1),r=a[0];return r}}),methods:Object(n["a"])(Object(n["a"])({},Object(c["b"])(["readAllMessagesByConversation"])),{},{scrollDown:function(){var e=document.querySelector("#chatMessages");e.scrollTop=e.scrollHeight},scrollAdjust:function(){var e=document.querySelector("#chatMessages");e.scrollTop=e.scrollHeight-e.scrollTop},formatDate:function(e){return _()(e).format("LLL")},handleLoading:function(e){var t=this;this.down=!1,this.readAllMessagesByConversation({conversationId:this.conversation.id,page:e}).then((function(){t.down=!0}))}}),mounted:function(){},updated:function(){this.down?this.scrollDown():this.scrollAdjust()}},y=j,P=(s("1a6b"),Object(m["a"])(y,p,v,!1,null,"53440a30",null)),O=P.exports,U=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-list-group",{staticClass:"flex-grow-1",attrs:{id:"conversationsList"}},[s("h2",{staticClass:"sr-only"},[e._v("Vos conversations en cours")]),e._l(e.allConversationsSortByNew,(function(t,a){return s("b-list-group-item",{key:a,staticClass:"border-0 rounded-pill text-dark d-flex justify-content-start align-items-center",attrs:{href:"#",active:e.currentConversation===t.id},on:{"~click":function(s){return e.readAllMessagesByConversation({conversationId:t.id,page:0})},click:function(s){return e.handleClick(t.id)}}},[s("b-avatar",{staticClass:"mr-3 bg-transparent",attrs:{badge:e.isOnline(t.Users),"badge-variant":"success",src:e.participants(t.Users)[0].image_url,size:"3.5rem"}}),s("div",[s("h3",{staticClass:"m-0 h5"},[e._v(" "+e._s(e.participants(t.Users)[0].user_name)+" "),e.participants(t.Users)[1]?s("span",[e._v(", "+e._s(e.participants(t.Users)[1].user_name))]):e._e(),e.participants(t.Users).length>3?s("span",[e._v(", ...")]):e._e()]),t.Messages.length?s("p",{staticClass:"text-muted m-0"},[e._v(" "+e._s(t.Messages[t.Messages.length-1].content)+" ")]):e._e(),t.Messages.length?s("small",[e._v(" "+e._s(e.formatDate(t.Messages[t.Messages.length-1].createdAt))+" ")]):e._e()]),e.unreadMessages(t.Messages)?s("b-icon-circle-fill",{staticClass:"ml-auto text-info",attrs:{"font-scale":"1"}}):e._e()],1)}))],2)},M=[],S=(s("7db0"),s("45fc"),s("4208")),I=s.n(S);_.a.extend(I.a);var A={name:"ChatConversations",computed:Object(n["a"])(Object(n["a"])({},Object(c["c"])(["allConversations","userId","allOnlineUsers","currentConversation"])),{},{allConversationsSortByNew:function(){return this.allConversations.slice().sort((function(e,t){var s=e.Messages.length?_()(e.Messages[e.Messages.length-1].createdAt).unix():0,a=t.Messages.length?_()(t.Messages[t.Messages.length-1].createdAt).unix():0;return a-s}))}}),methods:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(c["b"])(["readAllMessagesByConversation"])),Object(c["d"])(["setCurrentConversation"])),{},{participants:function(e){var t=this;return e.filter((function(e){return e.id!==t.userId}))},isOnline:function(e){var t=this,s=e.filter((function(e){return e.id!==t.userId})),a=this.allOnlineUsers.find((function(e){return e.userId===s[0].id}));return void 0!==a},unreadMessages:function(e){var t=this;return e.some((function(e){return!1===e.read&&e.UserId!==t.userId}))},formatDate:function(e){return _()(e).fromNow()},handleClick:function(e){this.setCurrentConversation(e)}})},$=A,D=(s("251e"),Object(m["a"])($,U,M,!1,null,"3ee9a994",null)),E=D.exports,L=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"p-2 p-sm-3 p-lg-4 d-flex align-items-center"},[s("b-button",{staticClass:"text-dark mr-1 mr-lg-0 d-lg-none",attrs:{variant:"link"}},[s("b-icon-arrow-left",{attrs:{"aria-label":"Revenir à la liste des conversations","font-scale":"1.5"},on:{click:function(t){return e.setCurrentConversation(0)}}})],1),s("b-avatar",{staticClass:"mr-3 bg-transparent",attrs:{src:e.otherUsers[0].image_url,size:"2.5rem"}}),s("h2",{staticClass:"h5 m-0"},[s("span",{staticClass:"sr-only"},[e._v("Conversation avec ")]),e._v(e._s(e.usersNames))])],1)},V=[],F=(s("4160"),s("a15b"),s("159b"),{name:"ChatHeader",computed:Object(n["a"])(Object(n["a"])({},Object(c["c"])(["userId","currentConversation","allConversations"])),{},{otherUsers:function(){var e=this,t=this.allConversations.filter((function(t){return t.id===e.currentConversation})),s=Object(i["a"])(t,1),a=s[0];return a.Users.filter((function(t){return t.id!==e.userId}))},usersNames:function(){var e=[];return this.otherUsers.forEach((function(t){return e.push(t.user_name)})),e.join(", ")}}),methods:Object(n["a"])({},Object(c["d"])(["setCurrentConversation"]))}),N=F,z=Object(m["a"])(N,L,V,!1,null,null,null),W=z.exports,Y={name:"Chat",components:{ChatUser:f,ChatMessages:O,ChatConversations:E,ChatHeader:W},data:function(){return{message:""}},watch:{currentConversation:function(e){var t=this;0!==this.currentConversation&&(this.socket.emit("subscribe",this.currentConversation),this.updateConversationAsRead(e).then((function(e){if(t.unreadCount>0){var s=Object(i["a"])(e.updated,1),a=s[0];t.setUnreadCount(t.unreadCount-a)}})))}},computed:Object(n["a"])({},Object(c["c"])(["userId","currentConversation","socket","unreadCount"])),methods:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(c["b"])(["fetchUser","fetchAllUsers","createMessage","updateConversationAsRead"])),Object(c["d"])(["setUnreadCount"])),{},{sendMessage:function(e){e.preventDefault(),this.createMessage({content:this.message}),this.message=""}}),mounted:function(){this.fetchUser(this.userId),this.fetchAllUsers()}},q=Y,R=(s("ed26"),Object(m["a"])(q,a,r,!1,null,"12b8a5ea",null));t["default"]=R.exports},"2c60":function(e,t,s){},"42b3":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("main",{attrs:{id:"PersonalAccount"}},[s("h1",{staticClass:"h2 text-center mb-4 sr-only"},[e._v("Vos données personnelles")]),s("b-tabs",{attrs:{"content-class":"p-md-5",pills:"",fill:""}},[s("b-tab",{attrs:{title:"Sujets"}},[s("h2",{staticClass:"h4 my-5"},[e._v("Vous suivez ces sujets")]),s("b-list-group",{attrs:{flush:""}},[e._l(e.allFollows,(function(e){return s("Subject",{key:e.id,attrs:{subject:e}})})),e.showAllSubjects?e._l(e.subjectsNotFollowed,(function(e){return s("Subject",{key:e.id,attrs:{subject:e}})})):s("b-button",{staticClass:"mt-4",attrs:{variant:"outline-dark"},on:{click:function(t){return e.showMoreSubjects()}}},[e._v("Voir tous les sujets")])],2)],1),s("b-tab",{attrs:{title:"Profile",lazy:""}},[s("UserForm",{attrs:{userData:e.oneUser}})],1),s("b-tab",{attrs:{title:"Privacy"}},[s("b-form",{staticClass:"mt-4",on:{submit:function(t){return t.preventDefault(),e.handleUpdateRgpd()}}},[s("b-row",[s("b-col",{staticClass:"d-flex align-items-center flex-row-reverse justify-content-end",attrs:{cols:"12"}},[s("label",{staticClass:"ml-2 my-0",attrs:{for:"restricted"}},[e._v(" Restreindre l'utilisation de mes données")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.rgpdCheckboxes.restricted,expression:"rgpdCheckboxes.restricted"}],attrs:{id:"restricted",type:"checkbox"},domProps:{checked:Array.isArray(e.rgpdCheckboxes.restricted)?e._i(e.rgpdCheckboxes.restricted,null)>-1:e.rgpdCheckboxes.restricted},on:{change:[function(t){var s=e.rgpdCheckboxes.restricted,a=t.target,r=!!a.checked;if(Array.isArray(s)){var n=null,i=e._i(s,n);a.checked?i<0&&e.$set(e.rgpdCheckboxes,"restricted",s.concat([n])):i>-1&&e.$set(e.rgpdCheckboxes,"restricted",s.slice(0,i).concat(s.slice(i+1)))}else e.$set(e.rgpdCheckboxes,"restricted",r)},function(t){e.updateSuccess=!1}]}})]),s("b-col",{staticClass:"d-flex align-items-center flex-row-reverse justify-content-end",attrs:{cols:"12"}},[s("label",{staticClass:"ml-2 my-0",attrs:{for:"contactable"}},[e._v(" Etre contacté par des partenaires commerciaux")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.rgpdCheckboxes.contactable,expression:"rgpdCheckboxes.contactable"}],attrs:{id:"contactable",type:"checkbox"},domProps:{checked:Array.isArray(e.rgpdCheckboxes.contactable)?e._i(e.rgpdCheckboxes.contactable,null)>-1:e.rgpdCheckboxes.contactable},on:{change:[function(t){var s=e.rgpdCheckboxes.contactable,a=t.target,r=!!a.checked;if(Array.isArray(s)){var n=null,i=e._i(s,n);a.checked?i<0&&e.$set(e.rgpdCheckboxes,"contactable",s.concat([n])):i>-1&&e.$set(e.rgpdCheckboxes,"contactable",s.slice(0,i).concat(s.slice(i+1)))}else e.$set(e.rgpdCheckboxes,"contactable",r)},function(t){e.updateSuccess=!1}]}})]),s("b-col",{staticClass:"d-flex align-items-center flex-row-reverse justify-content-end",attrs:{cols:"12"}},[s("label",{staticClass:"ml-2 my-0",attrs:{for:"shareWithPartners"}},[e._v(" Accepter que les données soient transmises a des partenaires")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.rgpdCheckboxes.shareWithPartners,expression:"rgpdCheckboxes.shareWithPartners"}],attrs:{id:"shareWithPartners",type:"checkbox"},domProps:{checked:Array.isArray(e.rgpdCheckboxes.shareWithPartners)?e._i(e.rgpdCheckboxes.shareWithPartners,null)>-1:e.rgpdCheckboxes.shareWithPartners},on:{change:[function(t){var s=e.rgpdCheckboxes.shareWithPartners,a=t.target,r=!!a.checked;if(Array.isArray(s)){var n=null,i=e._i(s,n);a.checked?i<0&&e.$set(e.rgpdCheckboxes,"shareWithPartners",s.concat([n])):i>-1&&e.$set(e.rgpdCheckboxes,"shareWithPartners",s.slice(0,i).concat(s.slice(i+1)))}else e.$set(e.rgpdCheckboxes,"shareWithPartners",r)},function(t){e.updateSuccess=!1}]}})])],1),e.updateSuccess?s("p",{staticClass:"text-success mt-2 mb-0"},[e._v(" Les modifications ont bien été prises en compte ")]):e._e(),s("b-button",{staticClass:"my-3",attrs:{id:"submitRgpd",type:"submit",variant:"dark"}},[e._v("Envoyer")])],1),s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.supressAccount",modifiers:{supressAccount:!0}}],staticClass:"text-left",attrs:{type:"button",variant:"link"}},[e._v(" Supprimer mon compte ")]),s("b-modal",{attrs:{id:"supressAccount",title:"BootstrapVue",centered:"","hide-header":"","hide-footer":"","body-class":"p-4 d-flex flex-column align-items-center"}},[s("p",{staticClass:"my-4 text-center"},[e._v(" Vous êtes sur le point de supprimer votre compte de manière définitive. ")]),s("b-button",{staticClass:"w-100 mb-2",attrs:{variant:"dark"},on:{click:function(t){return e.handleDelete()}}},[e._v(" Supprimer votre compte ")]),s("b-button",{staticClass:"w-100",attrs:{variant:"outline-danger"},on:{click:function(t){return e.$bvModal.hide("supressAccount")}}},[e._v(" Annuler ")])],1),s("b-button",{staticClass:"text-left",attrs:{type:"button",variant:"link"},on:{click:function(t){return e.handleExport()}}},[e._v(" Télécharger les données de votre compte ")])],1)],1)],1)},r=[],n=(s("4de4"),s("caad"),s("d81d"),s("d3b7"),s("2532"),s("3ca3"),s("ddb0"),s("2b3d"),s("5530")),i=s("fa7e"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ValidationObserver",{ref:"registerObserver",attrs:{tag:"div"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.handleSubmit;return[s("h2",{staticClass:"text-center my-5 h4"},[e._v("Vos informations personnelles")]),e.editInfos||e.editPass?e._e():s("div",[s("div",{staticClass:"d-flex align-items-center mb-4"},[s("h3",{staticClass:"h5 mr-4"},[e._v("Pseudo")]),e.editInfos?e._e():s("p",{staticClass:"m-0"},[e._v(e._s(e.userData.user_name))])]),s("div",{staticClass:"d-flex align-items-center mb-4"},[s("h3",{staticClass:"h5 mr-4"},[e._v("Email")]),e.editInfos?e._e():s("p",{staticClass:"m-0"},[e._v(e._s(e.userData.email))])]),s("div",{staticClass:"d-flex align-items-center mb-4"},[s("h3",{staticClass:"h5 mr-4"},[e._v("Photo de profil")]),s("b-img",{staticClass:"rounded-circle",attrs:{src:e.previewUrl,alt:"Votre photo de profil",width:"100",height:"100"}})],1),s("div",{staticClass:"d-flex align-items-center"},[s("h3",{staticClass:"h5 mr-4"},[e._v("Date de naissance")]),e.editInfos?e._e():s("p",{staticClass:"m-0"},[e._v(e._s(e.userData.birthdate))])])]),e.editInfos?s("b-form",{on:{submit:function(t){return t.preventDefault(),a(e.handleUpdateInfos)}}},[s("ValidationProvider",{attrs:{name:"email",rules:"email"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{attrs:{id:"userMail-group",label:"Email :","label-cols":"12","label-cols-md":"3","label-for":"userMail"}},[s("b-form-input",{attrs:{id:"userMail",type:"text",placeholder:e.userData.email,autofocus:"",trim:"",state:!r[0]&&(!!a||null)},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{name:"pseudo",rules:"alpha_num"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{attrs:{id:"userName-group",label:"Pseudo:","label-cols":"12","label-cols-md":"3","label-for":"userName"}},[s("b-form-input",{attrs:{id:"userName",type:"text",placeholder:e.userData.user_name,trim:"",state:!r[0]&&(!!a||null)},model:{value:e.user.user_name,callback:function(t){e.$set(e.user,"user_name",t)},expression:"user.user_name"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{name:"photo de profil",rules:"image"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{attrs:{id:"userImage-group",label:"Photo de profil:","label-cols":"12","label-cols-md":"3","label-for":"userImage"}},[e.editInfos?s("b-form-file",{attrs:{id:"userImage","browse-text":"Parcourir",placeholder:"Faites glisser ou sélectionnez une photo",accept:"image/*",state:!r[0]&&(!!a||null)},on:{change:function(t){return e.showPreview(t)}},model:{value:e.user.image_url,callback:function(t){e.$set(e.user,"image_url",t)},expression:"user.image_url"}}):e._e(),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[e._v(" "+e._s(r[0])+" ")])],1),s("b-img",{staticClass:"d-block mx-auto",attrs:{src:e.previewUrl,alt:"Votre photo de profil",width:"300",height:"300",fluid:""}})]}}],null,!0)}),e.editInfos&&!e.userIsMajor?s("ValidationProvider",{attrs:{name:"email des parents",rules:"email"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{attrs:{id:"userParentMail-group",label:"Email des responsables:","label-cols":"12","label-cols-md":"3","label-for":"userParentMail"}},[s("b-form-input",{attrs:{id:"userParentMail",type:"email",placeholder:e.userData.parentEmail,state:!r[0]&&(!!a||null)},model:{value:e.user.parentEmail,callback:function(t){e.$set(e.user,"parentEmail",t)},expression:"user.parentEmail"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}):e._e(),e.editInfos?s("b-button",{staticClass:"w-100 mt-4",attrs:{type:"button",variant:"outline-danger"},on:{click:function(t){e.editInfos=!1}}},[e._v("Annuler")]):e._e(),e.editInfos?s("b-button",{staticClass:"w-100 mt-4",attrs:{type:"submit",variant:"dark"}},[e._v("Envoyer")]):e._e()],1):e._e(),e.editPass?s("b-form",{on:{submit:function(t){return t.preventDefault(),a(e.handleUpdatePassword)}}},[s("ValidationProvider",{attrs:{name:"oldMdp",rules:"required|strongPassword"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{attrs:{id:"oldUserPass-group",label:"Ancien mot de passe:","label-cols":"12","label-cols-md":"3","label-for":"oldUserPass"}},[s("b-form-input",{attrs:{id:"oldUserPass",name:"ancien mot de passe",type:"password",trim:"",placeholder:"*********************",state:!r[0]&&(!!a||null)},model:{value:e.user.oldPassword,callback:function(t){e.$set(e.user,"oldPassword",t)},expression:"user.oldPassword"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{name:"newPassword",vid:"mdp",rules:"required|strongPassword"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{attrs:{id:"newUserPass-group",label:"Nouveau mot de passe:","label-cols":"12","label-cols-md":"3","label-for":"newUserPass"}},[s("b-form-input",{attrs:{id:"newUserPass",type:"password",placeholder:"*********************",trim:"",state:!r[0]&&(!!a||null)},model:{value:e.user.newPassword,callback:function(t){e.$set(e.user,"newPassword",t)},expression:"user.newPassword"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{name:"confirmation du nouveau mot de passe",rules:"confirmed:mdp"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{attrs:{id:"userConfirmPass-group",label:"Confirmation du mot de passe:","label-cols":"12","label-cols-md":"3","label-for":"userConfirmPass"}},[s("b-form-input",{attrs:{id:"userConfirmPass",type:"password",placeholder:"*********************",trim:"",state:!r[0]&&(!!a||null)},model:{value:e.user.confirmation,callback:function(t){e.$set(e.user,"confirmation",t)},expression:"user.confirmation"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}),s("b-button",{staticClass:"w-100 mt-4",attrs:{type:"button",variant:"outline-danger"},on:{click:function(t){e.editPass=!1}}},[e._v("Annuler")]),s("b-button",{staticClass:"w-100 mt-4",attrs:{type:"submit",variant:"dark"}},[e._v("Envoyer")])],1):e._e(),e.editInfos||e.editPass?e._e():s("b-button",{staticClass:"mt-4 mr-2",attrs:{type:"button",variant:"dark"},on:{click:function(t){e.editInfos=!0}}},[e._v("Modifier vos informations")]),e.editInfos||e.editPass?e._e():s("b-button",{staticClass:"mt-4",attrs:{type:"button",variant:"dark"},on:{click:function(t){e.editPass=!0}}},[e._v("Modifier votre mot de passe")])]}}])})},l=[],c=s("7bb1"),u=s("5a0c"),d=s.n(u),m=s("4208"),b=s.n(m),f=s("2f62");d.a.extend(b.a);var p={name:"UserForm",props:["userData"],data:function(){return{editInfos:!1,editPass:!1,previewUrl:null,user:{email:"",user_name:"",oldPassword:"",newPassword:"",confirmation:"",image_url:null,birthdate:"",parentEmail:""}}},components:{ValidationProvider:c["b"],ValidationObserver:c["a"]},computed:Object(n["a"])(Object(n["a"])({},Object(f["c"])(["userId","oneUser"])),{},{userIsMajor:function(){var e=d()(),t=d()(this.userData.birthdate);return e.diff(t,"year")>=18}}),methods:Object(n["a"])(Object(n["a"])({},Object(f["b"])(["updateUser","updatePassword"])),{},{showPreview:function(e){var t=e.target.files[0];this.previewUrl=URL.createObjectURL(t)},handleUpdateInfos:function(){var e=this,t=new FormData;t.append("email",this.user.email),t.append("user_name",this.user.user_name),this.user.image_url&&t.append("image_url",this.user.image_url),this.updateUser({id:this.userId,data:t}).then((function(){e.editInfos=!1}))},handleUpdatePassword:function(){var e=this,t={oldPassword:this.user.oldPassword,newPassword:this.user.confirmation};this.updatePassword({id:this.userId,requestBody:t}).then((function(){e.editPass=!1,e.user.oldPassword="",e.user.newPassword="",e.user.confirmation=""})).catch((function(t){switch(t){case"Wrong password":e.$refs.registerObserver.setErrors({oldMdp:["Mot de passe invalide"]});break;default:break}return console.error(t)}))}}),mounted:function(){this.user=Object(n["a"])(Object(n["a"])({},this.userData),{},{image_url:null}),this.previewUrl=this.userData.image_url}},v=p,h=s("2877"),g=Object(h["a"])(v,o,l,!1,null,null,null),_=g.exports,C={name:"PersonalAccount",components:{Subject:i["a"],UserForm:_},data:function(){return{showAllSubjects:!1,rgpdCheckboxes:{restricted:"",contactable:"",shareWithPartners:""},updateSuccess:!1,exportedDataURL:""}},computed:Object(n["a"])(Object(n["a"])({},Object(f["c"])(["oneUser","userId","allSubjects","allFollows"])),{},{subjectsNotFollowed:function(){var e=this.allFollows.map((function(e){return e.id}));return this.allSubjects.filter((function(t){return!e.includes(t.id)}))}}),methods:Object(n["a"])(Object(n["a"])({},Object(f["b"])(["fetchUser","fetchAllSubjects","getFollows","updateUser","deleteUser","logout","exportUser"])),{},{showMoreSubjects:function(){this.showAllSubjects=!0,this.fetchAllSubjects()},handleUpdateRgpd:function(){var e=this;this.updateSuccess=!1,this.updateUser({id:this.userId,data:this.rgpdCheckboxes}).then((function(){e.updateSuccess=!0}))},handleDelete:function(){var e=this;this.deleteUser(this.userId).then((function(){e.logout()}))},handleExport:function(){this.exportUser(this.userId).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=t,s.setAttribute("download","file.pdf"),document.body.appendChild(s),s.click()}))}}),mounted:function(){var e=this;this.getFollows(this.userId),this.fetchUser(this.userId).then((function(){e.rgpdCheckboxes.restricted=e.oneUser.restricted,e.rgpdCheckboxes.contactable=e.oneUser.contactable,e.rgpdCheckboxes.shareWithPartners=e.oneUser.shareWithPartners}))}},x=C,w=Object(h["a"])(x,a,r,!1,null,null,null);t["default"]=w.exports},"5a34":function(e,t,s){var a=s("44e7");e.exports=function(e){if(a(e))throw TypeError("The method doesn't accept regular expressions");return e}},"5d90":function(e,t,s){"use strict";s("f708")},"6fbb":function(e,t,s){},"73cf":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"full-height d-flex flex-column justify-content-center"},[a("h1",{staticClass:"sr-only"},[e._v("Inscription et connexion")]),a("b-img",{staticClass:"mx-auto mb-5",attrs:{src:s("b615"),alt:"Logo de groupomania",fluid:"",width:"450"}}),a("b-row",[a("b-col",{staticClass:"mx-auto p-4 shadow rounded",attrs:{cols:"12",sm:"10",md:"8",lg:"6"}},[a("h2",{staticClass:"sr-only"},[e._v("Connexion")]),a("Login",{on:{isLogged:function(t){return e.$bvModal.show("subjectSuggest")}}})],1),a("b-modal",{attrs:{"aria-label":"Formulaire de création d'utilisateur",id:"signupForm",size:"lg",centered:"","hide-header":"","hide-footer":"","body-class":"p-4"}},[a("Signup",{on:{isLogged:function(t){return e.$bvModal.show("subjectSuggest")}}})],1),a("b-modal",{attrs:{id:"subjectSuggest",lazy:"",centered:"",size:"lg","hide-header":"","hide-footer":"","body-class":"p-5"}},[a("SubjectSuggest")],1)],1)],1)},r=[],n=s("5530"),i=s("2f62"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ValidationObserver",{ref:"registerObserver",attrs:{tag:"div"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.handleSubmit;return[s("h2",{staticClass:"text-center mb-4"},[e._v("Rejoignez nous")]),s("b-form",{on:{submit:function(t){return t.preventDefault(),a(e.handleRegister)}}},[s("ValidationProvider",{attrs:{tag:"div",name:"email",rules:"required|email"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{staticClass:"align-items-center",attrs:{id:"registerMail-group",label:"Email :","label-cols":"12","label-cols-lg":"3","label-for":"registerMail"}},[s("b-form-input",{attrs:{id:"registerMail",type:"text",placeholder:"john@mail.com",autofocus:"",trim:"",state:!r[0]&&(!!a||null)},model:{value:e.signup.email,callback:function(t){e.$set(e.signup,"email",t)},expression:"signup.email"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{tag:"div",name:"pseudo",rules:"required|alpha_num"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{staticClass:"align-items-center",attrs:{id:"registerName-group",label:"Pseudo:","label-cols":"12","label-cols-lg":"3","label-for":"registerName"}},[s("b-form-input",{attrs:{id:"registerName",type:"text",placeholder:"John Doe",trim:"",state:!r[0]&&(!!a||null)},model:{value:e.signup.user_name,callback:function(t){e.$set(e.signup,"user_name",t)},expression:"signup.user_name"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{tag:"div",name:"mot de passe",vid:"mdp",rules:"required|min:8|max:16|strongPassword"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{staticClass:"align-items-center",attrs:{id:"registerPass-group",label:"Mot de passe:","label-cols":"12","label-cols-lg":"3","label-for":"registerPass"}},[s("b-form-input",{attrs:{id:"registerPass",type:"password",trim:"",placeholder:"*********************",state:!r[0]&&(!!a||null)},model:{value:e.signup.password,callback:function(t){e.$set(e.signup,"password",t)},expression:"signup.password"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{tag:"div",name:"confirmation",rules:"required|confirmed:mdp"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{staticClass:"align-items-center",attrs:{id:"registerConfirmPass-group",label:"Confirmation du mot de passe:","label-cols":"12","label-cols-lg":"3","label-for":"registerConfirmPass"}},[s("b-form-input",{attrs:{id:"registerConfirmPass",type:"password",placeholder:"*********************",trim:"",state:!r[0]&&(!!a||null)},model:{value:e.signup.confirmation,callback:function(t){e.$set(e.signup,"confirmation",t)},expression:"signup.confirmation"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{tag:"div",name:"photo de profil",rules:"image"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{staticClass:"d-flex align-items-center",attrs:{id:"registerImage-group",label:"Photo de profil:","label-cols":"12","label-cols-lg":"3","label-for":"registerImage"}},[s("b-form-file",{staticClass:" flex-grow-1",attrs:{id:"registerImage","browse-text":"Parcourir",placeholder:"Faites glisser ou sélectionnez une photo","drop-placeholder":"Déposez ici...",accept:"image/*",state:!r[0]&&(!!a||null)},model:{value:e.signup.image_url,callback:function(t){e.$set(e.signup,"image_url",t)},expression:"signup.image_url"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{tag:"div",name:"date de naissance",rules:"required|isDate|isPast"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{staticClass:"align-items-center",attrs:{id:"registerBirthdate-group",label:"Date de naissance:","label-cols":"12","label-cols-lg":"3","label-for":"registerBirthdate"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.signup.birthdate,expression:"signup.birthdate"}],staticClass:"form-control",class:{"is-invalid":r[0],"is-valid":a},attrs:{id:"registerBirthdate",type:"date"},domProps:{value:e.signup.birthdate},on:{input:function(t){t.target.composing||e.$set(e.signup,"birthdate",t.target.value)}}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{tag:"div",name:"email des parents",rules:"email"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{directives:[{name:"show",rawName:"v-show",value:e.userIsMajor,expression:"userIsMajor"}],staticClass:"align-items-center",attrs:{id:"registerParentMail-group",label:"Email des responsables:","label-cols":"12","label-cols-lg":"3","label-for":"registerParentMail"}},[s("b-form-input",{attrs:{id:"registerParentMail",type:"email",placeholder:"parents@mail.com",state:!r[0]&&(!!a||null)},model:{value:e.signup.parentEmail,callback:function(t){e.$set(e.signup,"parentEmail",t)},expression:"signup.parentEmail"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}),s("div",{staticClass:"row"},[s("label",{staticClass:"col-12 col-lg-3 col-form-label"},[e._v("RGPD")]),s("div",{staticClass:"col-12 col-lg-9"},[s("p",{staticClass:"sr-only"},[e._v("Voici un ensemble de cases à cocher pour nous permettre de respecter au mieux vos données d'utilisation.")]),s("b-form-checkbox",{staticClass:"mb-2",model:{value:e.signup.restricted,callback:function(t){e.$set(e.signup,"restricted",t)},expression:"signup.restricted"}},[e._v(" Restreindre l'usage de vos données ")]),s("b-form-checkbox",{staticClass:"mb-2",model:{value:e.signup.shareWithPartners,callback:function(t){e.$set(e.signup,"shareWithPartners",t)},expression:"signup.shareWithPartners"}},[e._v(" Partage de vos données avec nos partenaires ")]),s("b-form-checkbox",{staticClass:"mb-2",model:{value:e.signup.contactable,callback:function(t){e.$set(e.signup,"contactable",t)},expression:"signup.contactable"}},[e._v(" Recevoir des offres de nos partenaires ")])],1)]),s("b-button",{staticClass:"w-100 mt-4",attrs:{type:"submit",variant:"dark"}},[e._v("Suivant")])],1)]}}])})},l=[],c=(s("4160"),s("4fad"),s("159b"),s("3835")),u=s("7bb1"),d=s("5a0c"),m=s.n(d),b=s("4208"),f=s.n(b);m.a.extend(f.a);var p={name:"Signup",components:{ValidationProvider:u["b"],ValidationObserver:u["a"]},data:function(){return{signup:{user_name:"",email:"",password:"",confirmation:"",image_url:null,birthdate:"",parentEmail:null,restricted:!0,shareWithPartners:!1,contactable:!1}}},computed:{userIsMajor:function(){var e=m()(),t=m()(this.signup.birthdate);return e.diff(t,"year")<=18}},methods:Object(n["a"])(Object(n["a"])({},Object(i["b"])(["register","login"])),{},{handleRegister:function(){var e=this,t=new FormData;Object.entries(this.signup).forEach((function(e){var s=Object(c["a"])(e,2),a=s[0],r=s[1];return null!==r?t.append("".concat(a),r):""})),this.register(t).then((function(){var t={email:e.signup.email,password:e.signup.password};e.login(t).then((function(){e.$emit("isLogged")}))})).catch((function(t){switch(t){case"user.user_name must be unique":e.$refs.registerObserver.setErrors({pseudo:["Ce pseudo est déjà utilisé"]});break;case"user.email must be unique":e.$refs.registerObserver.setErrors({email:["Cet email est déjà utilisé"]});break;default:break}return console.error(t)}))}})},v=p,h=s("2877"),g=Object(h["a"])(v,o,l,!1,null,null,null),_=g.exports,C=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ValidationObserver",{ref:"loginObserver",attrs:{tag:"div"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.handleSubmit;return[s("b-form",{on:{submit:function(t){return t.preventDefault(),a(e.handleLogin)}}},[s("ValidationProvider",{attrs:{tag:"div",name:"email",rules:"required|email"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{staticClass:"align-items-center",attrs:{id:"loginMail-group",label:"Email :","label-cols":"12","label-cols-lg":"3","label-for":"loginMail"}},[s("b-form-input",{attrs:{id:"loginMail",type:"text",placeholder:"john@mail.com",autofocus:"",trim:"",state:!r[0]&&(!!a||null)},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"assertive"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{tag:"div",name:"mot de passe",vid:"mdp",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{staticClass:"align-items-center",attrs:{id:"loginPass-group",label:"Mot de passe:","label-cols":"12","label-cols-lg":"3","label-for":"loginPass"}},[s("b-form-input",{attrs:{id:"loginPass",type:"password",trim:"",placeholder:"*********************",state:!r[0]&&(!!a||null)},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}),s("b-button",{staticClass:"w-100",attrs:{type:"submit",variant:"outline-dark"}},[e._v(" Se connecter ")]),s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.signupForm",modifiers:{signupForm:!0}}],staticClass:"w-100 my-3",attrs:{variant:"dark"}},[e._v(" Créer un compte ")])],1)]}}])})},x=[],w={name:"Login",components:{ValidationProvider:u["b"],ValidationObserver:u["a"]},data:function(){return{user:{email:"",password:""}}},computed:Object(n["a"])({},Object(i["c"])(["isFollowing","userId"])),methods:Object(n["a"])(Object(n["a"])({},Object(i["b"])(["register","login","getFollows"])),{},{handleLogin:function(){var e=this,t={};this.user.email&&this.user.password&&(t=Object(n["a"])({},this.user)),this.login(t).then((function(){e.getFollows(e.userId).then((function(){e.isFollowing?document.location.reload():e.$emit("isLogged")}))})).catch((function(t){switch(t){case"Wrong password":e.$refs.loginObserver.setErrors({mdp:["Mot de passe incorrect"]});break;case"User not found":e.$refs.loginObserver.setErrors({email:["Email incorrect"]});break;default:break}return console.error(t)}))}})},k=w,j=Object(h["a"])(k,C,x,!1,null,null,null),y=j.exports,P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-row",{staticClass:"shadow rounded-lg p-4 p-lg-5",attrs:{id:"SubjectSuggest"}},[s("b-col",{attrs:{cols:"12"}},[s("h2",[e._v("Bonjour ")]),s("p",{staticClass:"text-break"},[e._v("Vous ne suivez actuellement aucun sujet de conversation, nous vous proposons une selection de sujets qui pourraient vous correspondre.")]),s("p",{staticClass:"mb-0 text-break"},[e._v("Selectionnez en au moins 3 pour commencer à remplir votre fil de posts et voir ce que vos collègues ont à dire !")])]),s("b-col",{attrs:{cols:"12"}},[s("b-row",{staticClass:"col-12 mx-auto my-5",attrs:{tag:"div",cols:"1"}},e._l(e.allSubjects,(function(e,t){return s("subject",{key:t,attrs:{subject:e}})})),1),s("b-button",{attrs:{disabled:!e.isFollowing,variant:"success"},on:{click:function(t){return e.refresh()}}},[e._v(" Continuer ")])],1)],1)},O=[],U=s("fa7e"),M={name:"SubjectSuggest",components:{Subject:U["a"]},computed:Object(n["a"])({},Object(i["c"])(["allSubjects","isFollowing"])),methods:Object(n["a"])(Object(n["a"])({},Object(i["b"])(["fetchAllSubjects"])),{},{refresh:function(){document.location.reload()}}),mounted:function(){this.fetchAllSubjects()}},S=M,I=(s("0549"),Object(h["a"])(S,P,O,!1,null,"0096873c",null)),A=I.exports,$={name:"Register",components:{Signup:_,Login:y,SubjectSuggest:A},computed:Object(n["a"])(Object(n["a"])({},Object(i["c"])(["loggedUser","allFollows"])),{},{loggedIn:function(){return this.loggedUser.status.loggedIn}}),mounted:function(){this.loggedIn&&this.$router.push({name:"Home"})}},D=$,E=(s("0996"),Object(h["a"])(D,a,r,!1,null,"0e65f858",null));t["default"]=E.exports},8140:function(e,t,s){},a15b:function(e,t,s){"use strict";var a=s("23e7"),r=s("44ad"),n=s("fc6a"),i=s("a640"),o=[].join,l=r!=Object,c=i("join",",");a({target:"Array",proto:!0,forced:l||!c},{join:function(e){return o.call(n(this),void 0===e?",":e)}})},ab13:function(e,t,s){var a=s("b622"),r=a("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(s){try{return t[r]=!1,"/./"[e](t)}catch(a){}}return!1}},b615:function(e,t,s){e.exports=s.p+"img/icon-above-font.571187b7.png"},b772:function(e,t,s){},d81d:function(e,t,s){"use strict";var a=s("23e7"),r=s("b727").map,n=s("1dde"),i=s("ae40"),o=n("map"),l=i("map");a({target:"Array",proto:!0,forced:!o||!l},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},ed26:function(e,t,s){"use strict";s("b772")},f708:function(e,t,s){},fc46:function(e,t,s){}}]);
//# sourceMappingURL=about.58341c62.js.map