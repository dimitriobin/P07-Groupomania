{"version":3,"sources":["webpack:///./src/components/Chat/ChatMessages.vue?7ead","webpack:///./node_modules/dayjs/plugin/localizedFormat.js","webpack:///./src/components/Chat/ChatConversations.vue?9fc3","webpack:///./src/views/Chat.vue?3f55","webpack:///./src/components/Chat/ChatUser.vue?01b2","webpack:///src/components/Chat/ChatUser.vue","webpack:///./src/components/Chat/ChatUser.vue?0df8","webpack:///./src/components/Chat/ChatUser.vue?a810","webpack:///./src/components/Chat/ChatMessages.vue?74fd","webpack:///src/components/Chat/ChatMessages.vue","webpack:///./src/components/Chat/ChatMessages.vue?250c","webpack:///./src/components/Chat/ChatMessages.vue?04fb","webpack:///./src/components/Chat/ChatConversations.vue?3687","webpack:///src/components/Chat/ChatConversations.vue","webpack:///./src/components/Chat/ChatConversations.vue?34d1","webpack:///./src/components/Chat/ChatConversations.vue?4c78","webpack:///./src/components/Chat/ChatHeader.vue?3287","webpack:///src/components/Chat/ChatHeader.vue","webpack:///./src/components/Chat/ChatHeader.vue?5081","webpack:///./src/components/Chat/ChatHeader.vue","webpack:///src/views/Chat.vue","webpack:///./src/views/Chat.vue?6ed9","webpack:///./src/views/Chat.vue?6af0","webpack:///./src/components/Chat/ChatUser.vue?c27c","webpack:///./node_modules/core-js/modules/es.array.join.js","webpack:///./src/views/Chat.vue?8b5f"],"names":["e","t","module","exports","this","LTS","LT","L","LL","LLL","LLLL","n","o","r","prototype","M","format","en","formats","$locale","replace","toUpperCase","slice","call","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","class","currentConversation","_v","directives","name","rawName","modifiers","on","$event","$bvModal","hide","sendMessage","model","value","callback","$$v","message","expression","show","staticRenderFns","_l","user","index","key","selectedUser","id","isOnline","image_url","_s","user_name","handleSubmit","data","computed","allOtherUsers","allUsers","filter","methods","compare","length","createConversation","userId","component","conversation","Messages","totalMessages","handleLoading","UserId","formatDate","createdAt","content","lastMessageSent","read","updatedAt","_e","components","LazyLoadingScroll","down","watch","allConversations","lastMessage","scrollDown","chatMessages","scrollTop","scrollHeight","scrollAdjust","readAllMessagesByConversation","mounted","updated","conversationId","page","handleClick","Users","participants","unreadMessages","allConversationsSortByNew","sort","y","x","users","undefined","messages","some","setCurrentConversation","otherUsers","usersNames","forEach","names","join","ChatUser","ChatMessages","ChatConversations","ChatHeader","socket","emit","updateConversationAsRead","newValue","preventDefault","createMessage","fetchUser","fetchAllUsers","$","IndexedObject","toIndexedObject","arrayMethodIsStrict","nativeJoin","ES3_STRINGS","Object","STRICT_METHOD","target","proto","forced","separator"],"mappings":"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","file":"js/chat.b1b78197.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMessages.vue?vue&type=style&index=0&id=53440a30&scoped=true&lang=css&\"","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):e.dayjs_plugin_localizedFormat=t()}(this,function(){\"use strict\";var e={LTS:\"h:mm:ss A\",LT:\"h:mm A\",L:\"MM/DD/YYYY\",LL:\"MMMM D, YYYY\",LLL:\"MMMM D, YYYY h:mm A\",LLLL:\"dddd, MMMM D, YYYY h:mm A\"};return function(t,n,o){var r=n.prototype,M=r.format;o.en.formats=e,r.format=function(t){void 0===t&&(t=\"YYYY-MM-DDTHH:mm:ssZ\");var n=this.$locale().formats,o=function(t,n){return t.replace(/(\\[[^\\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(t,o,r){var M=r&&r.toUpperCase();return o||n[r]||e[r]||n[M].replace(/(\\[[^\\]]+])|(MMMM|MM|DD|dddd)/g,function(e,t,n){return t||n.slice(1)})})}(t,void 0===n?{}:n);return M.call(this,o)}}});\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatConversations.vue?vue&type=style&index=0&id=3ee9a994&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-row',{staticClass:\"rounded-lg shadow h-100\",attrs:{\"tag\":\"main\",\"id\":\"chat\"}},[_c('b-col',{staticClass:\"h-100 border-right flex-column justify-content-between\",class:{'d-none d-lg-flex': _vm.currentConversation, 'd-flex': !_vm.currentConversation},attrs:{\"cols\":\"12\",\"lg\":\"4\"}},[_c('div',{staticClass:\"d-flex justify-content-between align-items-center p-2\"},[_c('h1',{staticClass:\"h3\"},[_vm._v(\"Discussions\")]),_c('b-button',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.onlineUsers\",modifiers:{\"onlineUsers\":true}}],staticClass:\"bg-transparent border-0\"},[_c('b-icon-pencil-square',{staticClass:\"text-dark\",attrs:{\"aria-label\":\"Démarrer une conversation avec un collègue\",\"font-scale\":\"1.5\"}})],1),_c('b-modal',{attrs:{\"id\":\"onlineUsers\",\"title\":\"Avec qui voulez-vous discutter ?\",\"hide-footer\":\"\",\"centered\":\"\",\"scrollable\":\"\",\"content-class\":\"h-100\"}},[_c('ChatUser',{on:{\"conversationCreated\":function($event){return _vm.$bvModal.hide('onlineUsers')}}})],1)],1),_c('ChatConversations')],1),(_vm.currentConversation !== 0)?_c('b-col',{staticClass:\"h-100 d-flex flex-column justify-content-between align-items-stretch\"},[_c('ChatHeader'),_c('ChatMessages'),_c('form',{staticClass:\"d-flex justify-content-between align-items-center position-relative\",on:{\"submit\":_vm.sendMessage}},[_c('b-form-input',{staticClass:\"my-3 w-100\",attrs:{\"aria-label\":\"Envoyer un nouveau message\"},model:{value:(_vm.message),callback:function ($$v) {_vm.message=$$v},expression:\"message\"}}),_c('b-button',{staticClass:\"input__btn\",attrs:{\"type\":\"submit\",\"variant\":\"link\"}},[_vm._v(\"Envoyer\")])],1)],1):_c('b-col',{staticClass:\"h-100 d-none d-lg-flex flex-column justify-content-center align-items-center\"},[_c('h2',[_vm._v(\"Vos messages\")]),_c('p',[_vm._v(\"Créer une nouvelle conversation avec vos collègues \")]),_c('b-button',{attrs:{\"variant\":\"dark\",\"pill\":\"\"},on:{\"click\":function($event){return _vm.$bvModal.show('onlineUsers')}}},[_vm._v(\" Créer une conversation \")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"h-100 d-flex flex-column justify-between align-items-stretch\"},[_c('b-list-group',{staticClass:\"overflow-y-auto overflow-x-hidden\",attrs:{\"id\":\"onlineUsersList\"}},_vm._l((_vm.allOtherUsers),function(user,index){return _c('b-list-group-item',{key:index,staticClass:\"border-0 rounded-pill text-dark d-flex justify-content-start align-items-center\",class:{ 'active': _vm.selectedUser === user.id },attrs:{\"href\":\"#\"},on:{\"click\":function($event){_vm.selectedUser = user.id}}},[_c('b-avatar',{staticClass:\"mr-3 bg-transparent\",attrs:{\"badge\":_vm.isOnline(user.id),\"badge-variant\":\"success\",\"src\":user.image_url,\"size\":\"3.5rem\"}}),_c('div',[_c('p',{staticClass:\"m-0 h5\"},[_vm._v(_vm._s(user.user_name))])])],1)}),1),_c('div',{staticClass:\"mt-2 w-100\"},[_c('b-button',{staticClass:\"d-block mx-auto\",attrs:{\"variant\":\"success\",\"size\":\"lg\"},on:{\"~click\":function($event){return _vm.handleSubmit()}}},[_vm._v(\" Démarrer une conversation \")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n<div class=\"h-100 d-flex flex-column justify-between align-items-stretch\">\r\n  <b-list-group\r\n    id=\"onlineUsersList\"\r\n    class=\"overflow-y-auto overflow-x-hidden\">\r\n    <b-list-group-item\r\n      v-for=\"(user, index) in allOtherUsers\"\r\n      :key=\"index\"\r\n      href=\"#\"\r\n      :class=\"{ 'active': selectedUser === user.id }\"\r\n      class=\"border-0 rounded-pill text-dark d-flex justify-content-start align-items-center\"\r\n      @click=\"selectedUser = user.id\">\r\n      <b-avatar\r\n        :badge=\"isOnline(user.id)\"\r\n        badge-variant=\"success\"\r\n        :src=\"user.image_url\"\r\n        size=\"3.5rem\"\r\n        class=\"mr-3 bg-transparent\">\r\n      </b-avatar>\r\n      <div>\r\n        <p class=\"m-0 h5\">{{ user.user_name }}</p>\r\n      </div>\r\n    </b-list-group-item>\r\n  </b-list-group>\r\n  <div class=\"mt-2 w-100\">\r\n    <b-button\r\n      @click.once=\"handleSubmit()\"\r\n      class=\"d-block mx-auto\" variant=\"success\" size=\"lg\">\r\n      Démarrer une conversation\r\n    </b-button>\r\n  </div>\r\n\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from 'vuex';\r\n\r\nexport default {\r\n  name: 'ChatUser',\r\n  data() {\r\n    return {\r\n      selectedUser: '',\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'userId',\r\n      'allUsers',\r\n      'allOnlineUsers',\r\n    ]),\r\n    allOtherUsers() {\r\n      return this.allUsers.filter((user) => user.id !== this.userId);\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions([\r\n      'createConversation',\r\n    ]),\r\n    isOnline(userId) {\r\n      const compare = this.allOnlineUsers.filter((user) => (user.userId === userId));\r\n      return compare.length > 0;\r\n    },\r\n    handleSubmit() {\r\n      this.createConversation([this.selectedUser, this.userId])\r\n        .then(() => this.$emit('conversationCreated'));\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#onlineUsersList {\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\r\n  box-sizing: border-box;\r\n  padding: 1rem 0;\r\n}\r\n\r\n.active {\r\n  background: rgba(220, 53, 69, 0.1) !important;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatUser.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatUser.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatUser.vue?vue&type=template&id=ce313674&scoped=true&\"\nimport script from \"./ChatUser.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatUser.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatUser.vue?vue&type=style&index=0&id=ce313674&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ce313674\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pt-0 px-sm-3 px-md-4 d-flex flex-column justify-content-end align-items-stretch\",attrs:{\"id\":\"chatMessages\"}},[(_vm.conversation.Messages.length && _vm.conversation.Messages.length < _vm.conversation.totalMessages)?_c('LazyLoadingScroll',{on:{\"loadMore\":function($event){return _vm.handleLoading($event)}}}):_c('p',{staticClass:\"text-center my-4 text-muted\"},[_vm._v(\" \"+_vm._s(_vm.conversation.Messages.length > 0 ? 'Fin des messages' : 'Cette conversation ne contient aucun message')+\" \")]),_vm._l((_vm.conversation.Messages),function(message,index){return _c('p',{key:index,staticClass:\"d-flex flex-column justify-content-center align-items-start\"},[_c('span',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.hover\",modifiers:{\"hover\":true}}],staticClass:\"bg-light px-4 py-2 rounded-pill w-auto text-break mw-70\",class:{ 'message-sent': message.UserId === _vm.userId },attrs:{\"title\":_vm.formatDate(message.createdAt)}},[_vm._v(\" \"+_vm._s(message.content)+\" \")]),(_vm.lastMessageSent && _vm.lastMessageSent.id === message.id && message.read === true && message.UserId === _vm.userId)?_c('span',{staticClass:\"align-self-end\"},[_c('b-icon-check-all'),_c('small',[_vm._v(\" vu le \"+_vm._s(_vm.formatDate(message.updatedAt))+\" \")])],1):_vm._e(),(index === _vm.conversation.Messages.length - 1 && message.read === false && message.UserId === _vm.userId)?_c('span',{staticClass:\"align-self-end\"},[_c('b-icon-check'),_c('small',[_vm._v(\" envoyé le \"+_vm._s(_vm.formatDate(message.createdAt))+\" \")])],1):_vm._e()])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div\r\n    id=\"chatMessages\"\r\n    class=\"pt-0 px-sm-3 px-md-4 d-flex flex-column justify-content-end align-items-stretch\">\r\n    <LazyLoadingScroll\r\n      v-if=\"conversation.Messages.length && conversation.Messages.length < conversation.totalMessages\"\r\n      @loadMore=\"handleLoading($event)\" />\r\n    <p v-else class=\"text-center my-4 text-muted\">\r\n      {{ conversation.Messages.length > 0 ? 'Fin des messages' : 'Cette conversation ne contient aucun message' }}\r\n    </p>\r\n    <p\r\n      v-for=\"(message, index) in conversation.Messages\"\r\n      :key=\"index\"\r\n      class=\"d-flex flex-column justify-content-center align-items-start\">\r\n        <span\r\n          v-b-tooltip.hover :title=\"formatDate(message.createdAt)\"\r\n          :class=\"{ 'message-sent': message.UserId === userId }\"\r\n          class=\"bg-light px-4 py-2 rounded-pill w-auto text-break mw-70\">\r\n          {{ message.content }}\r\n        </span>\r\n        <span\r\n          v-if=\"lastMessageSent && lastMessageSent.id === message.id && message.read === true && message.UserId === userId\"\r\n          class=\"align-self-end\">\r\n          <b-icon-check-all>\r\n          </b-icon-check-all>\r\n          <small>\r\n            vu le {{formatDate(message.updatedAt)}}\r\n          </small>\r\n        </span>\r\n        <span\r\n          v-if=\"index === conversation.Messages.length - 1 && message.read === false && message.UserId === userId\"\r\n          class=\"align-self-end\">\r\n          <b-icon-check>\r\n          </b-icon-check>\r\n          <small>\r\n            envoyé le {{formatDate(message.createdAt)}}\r\n          </small>\r\n        </span>\r\n    </p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from 'vuex';\r\nimport LazyLoadingScroll from '@/components/LazyLoadingScroll.vue';\r\nimport dayjs from 'dayjs';\r\nimport fr from 'dayjs/locale/fr';\r\nimport LocalizedFormat from 'dayjs/plugin/localizedFormat';\r\n\r\ndayjs.extend(LocalizedFormat);\r\ndayjs.locale(fr);\r\n\r\nexport default {\r\n  name: 'ChatMessages',\r\n  components: {\r\n    LazyLoadingScroll,\r\n  },\r\n  data() {\r\n    return {\r\n      down: true,\r\n    };\r\n  },\r\n  watch: {\r\n    currentConversation() {\r\n      this.down = true;\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'userId',\r\n      'allConversations',\r\n      'currentConversation',\r\n      'socket',\r\n    ]),\r\n    conversation() {\r\n      return this.allConversations.filter((conversation) => conversation.id === this.currentConversation)[0];\r\n    },\r\n    lastMessageSent() {\r\n      const messages = this.conversation.Messages.filter((msg) => msg.UserId === this.userId);\r\n      const [lastMessage] = messages.slice().sort((a, b) => dayjs(b.createdAt).unix() - dayjs(a.createdAt).unix());\r\n      return lastMessage;\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions([\r\n      'readAllMessagesByConversation',\r\n    ]),\r\n    scrollDown() {\r\n      const chatMessages = document.querySelector('#chatMessages');\r\n      chatMessages.scrollTop = chatMessages.scrollHeight;\r\n    },\r\n    scrollAdjust() {\r\n      const chatMessages = document.querySelector('#chatMessages');\r\n      chatMessages.scrollTop = chatMessages.scrollHeight - chatMessages.scrollTop;\r\n    },\r\n    formatDate(date) {\r\n      return dayjs(date).format('LLL');\r\n    },\r\n    handleLoading(e) {\r\n      this.down = false;\r\n      this.readAllMessagesByConversation({ conversationId: this.conversation.id, page: e })\r\n        .then(() => {\r\n          this.down = true;\r\n        });\r\n    },\r\n  },\r\n  mounted() {\r\n    // this.socket.on('message', (msg) => {\r\n    //   console.log(msg.ConversationId);\r\n    //   if (msg.ConversationId === this.currentConversation) {\r\n    //     this.scrollDown();\r\n    //   }\r\n    // });\r\n  },\r\n  updated() {\r\n    if (this.down) {\r\n      this.scrollDown();\r\n    } else {\r\n      this.scrollAdjust();\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#chatMessages {\r\n  height: 100%;\r\n  overflow-x: hidden;\r\n  overflow-y: scroll;\r\n}\r\n\r\n.message-sent {\r\n  text-align: right;\r\n  background: rgba(0, 179, 217, 0.1) !important;\r\n  width: auto !important;\r\n  align-self: flex-end;\r\n}\r\n\r\n.messages-header {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  z-index: 10;\r\n}\r\n\r\n.mw-70 {\r\n  max-width: 70%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMessages.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMessages.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatMessages.vue?vue&type=template&id=53440a30&scoped=true&\"\nimport script from \"./ChatMessages.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatMessages.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatMessages.vue?vue&type=style&index=0&id=53440a30&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"53440a30\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-list-group',{staticClass:\"flex-grow-1\",attrs:{\"id\":\"conversationsList\"}},[_c('h2',{staticClass:\"sr-only\"},[_vm._v(\"Vos conversations en cours\")]),_vm._l((_vm.allConversationsSortByNew),function(conversation,index){return _c('b-list-group-item',{key:index,staticClass:\"border-0 rounded-pill text-dark d-flex justify-content-start align-items-center\",attrs:{\"href\":\"#\",\"active\":_vm.currentConversation === conversation.id},on:{\"~click\":function($event){return _vm.readAllMessagesByConversation({ conversationId: conversation.id, page: 0 })},\"click\":function($event){return _vm.handleClick(conversation.id)}}},[_c('b-avatar',{staticClass:\"mr-3 bg-transparent\",attrs:{\"badge\":_vm.isOnline(conversation.Users),\"badge-variant\":\"success\",\"src\":_vm.participants(conversation.Users)[0].image_url,\"size\":\"3.5rem\"}}),_c('div',[_c('h3',{staticClass:\"m-0 h5\"},[_vm._v(\" \"+_vm._s(_vm.participants(conversation.Users)[0].user_name)+\" \"),(_vm.participants(conversation.Users)[1])?_c('span',[_vm._v(\", \"+_vm._s(_vm.participants(conversation.Users)[1].user_name))]):_vm._e(),(_vm.participants(conversation.Users).length > 3)?_c('span',[_vm._v(\", ...\")]):_vm._e()]),(conversation.Messages.length)?_c('p',{staticClass:\"text-muted m-0\"},[_vm._v(\" \"+_vm._s(conversation.Messages[conversation.Messages.length - 1].content)+\" \")]):_vm._e(),(conversation.Messages.length)?_c('small',[_vm._v(\" \"+_vm._s(_vm.formatDate(conversation.Messages[conversation.Messages.length - 1].createdAt))+\" \")]):_vm._e()]),(_vm.unreadMessages(conversation.Messages))?_c('b-icon-circle-fill',{staticClass:\"ml-auto text-info\",attrs:{\"font-scale\":\"1\"}}):_vm._e()],1)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n<b-list-group id=\"conversationsList\" class=\"flex-grow-1\">\r\n  <h2 class=\"sr-only\">Vos conversations en cours</h2>\r\n  <b-list-group-item\r\n    v-for=\"(conversation, index) in allConversationsSortByNew\"\r\n    :key=\"index\"\r\n    href=\"#\"\r\n    :active=\"currentConversation === conversation.id\"\r\n    @click.once=\"readAllMessagesByConversation({ conversationId: conversation.id, page: 0 })\"\r\n    @click=\"handleClick(conversation.id)\"\r\n    class=\"border-0 rounded-pill text-dark d-flex justify-content-start align-items-center\">\r\n    <b-avatar\r\n      :badge=\"isOnline(conversation.Users)\"\r\n      badge-variant=\"success\"\r\n      :src=\"participants(conversation.Users)[0].image_url\"\r\n      size=\"3.5rem\"\r\n      class=\"mr-3 bg-transparent\">\r\n    </b-avatar>\r\n    <div>\r\n      <h3 class=\"m-0 h5\">\r\n        {{ participants(conversation.Users)[0].user_name }}\r\n        <span v-if=\"participants(conversation.Users)[1]\">, {{ participants(conversation.Users)[1].user_name }}</span>\r\n        <span v-if=\"participants(conversation.Users).length > 3\">, ...</span>\r\n      </h3>\r\n      <p\r\n        v-if=\"conversation.Messages.length\"\r\n        class=\"text-muted m-0\">\r\n        {{ conversation.Messages[conversation.Messages.length - 1].content }}\r\n      </p>\r\n      <small\r\n        v-if=\"conversation.Messages.length\">\r\n        {{ formatDate(conversation.Messages[conversation.Messages.length - 1].createdAt) }}\r\n      </small>\r\n    </div>\r\n    <b-icon-circle-fill\r\n      v-if=\"unreadMessages(conversation.Messages)\"\r\n      font-scale=\"1\"\r\n      class=\"ml-auto text-info\">\r\n    </b-icon-circle-fill>\r\n  </b-list-group-item>\r\n</b-list-group>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters, mapMutations } from 'vuex';\r\nimport dayjs from 'dayjs';\r\nimport relativeTime from 'dayjs/plugin/relativeTime';\r\n\r\ndayjs.extend(relativeTime);\r\n\r\nexport default {\r\n  name: 'ChatConversations',\r\n  computed: {\r\n    ...mapGetters([\r\n      'allConversations',\r\n      'userId',\r\n      'allOnlineUsers',\r\n      'currentConversation',\r\n    ]),\r\n    allConversationsSortByNew() {\r\n      return this.allConversations.slice().sort((a, b) => {\r\n        const x = a.Messages.length ? dayjs(a.Messages[a.Messages.length - 1].createdAt).unix() : 0;\r\n        const y = b.Messages.length ? dayjs(b.Messages[b.Messages.length - 1].createdAt).unix() : 0;\r\n        return y - x;\r\n      });\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions([\r\n      'readAllMessagesByConversation',\r\n    ]),\r\n    ...mapMutations([\r\n      'setCurrentConversation',\r\n    ]),\r\n    participants(users) {\r\n      return users.filter((user) => user.id !== this.userId);\r\n    },\r\n    isOnline(users) {\r\n      const otherUsers = users.filter((user) => user.id !== this.userId);\r\n      const compare = this.allOnlineUsers.find((onlineUser) => (onlineUser.userId === otherUsers[0].id));\r\n      return compare !== undefined;\r\n    },\r\n    unreadMessages(messages) {\r\n      return messages.some((msg) => msg.read === false && msg.UserId !== this.userId);\r\n    },\r\n    formatDate(date) {\r\n      return dayjs(date).fromNow();\r\n    },\r\n    handleClick(e) {\r\n      this.setCurrentConversation(e);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#conversationsList {\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\r\n  box-sizing: border-box;\r\n  padding: 1rem 0;\r\n}\r\n\r\n.active {\r\n  background: rgba(220, 53, 69, 0.1) !important;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatConversations.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatConversations.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatConversations.vue?vue&type=template&id=3ee9a994&scoped=true&\"\nimport script from \"./ChatConversations.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatConversations.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatConversations.vue?vue&type=style&index=0&id=3ee9a994&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3ee9a994\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"p-2 p-sm-3 p-lg-4 d-flex align-items-center\"},[_c('b-button',{staticClass:\"text-dark mr-1 mr-lg-0 d-lg-none\",attrs:{\"variant\":\"link\"}},[_c('b-icon-arrow-left',{attrs:{\"aria-label\":\"Revenir à la liste des conversations\",\"font-scale\":\"1.5\"},on:{\"click\":function($event){return _vm.setCurrentConversation(0)}}})],1),_c('b-avatar',{staticClass:\"mr-3 bg-transparent\",attrs:{\"src\":_vm.otherUsers[0].image_url,\"size\":\"2.5rem\"}}),_c('h2',{staticClass:\"h5 m-0\"},[_c('span',{staticClass:\"sr-only\"},[_vm._v(\"Conversation avec \")]),_vm._v(_vm._s(_vm.usersNames))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div\r\n    class=\"p-2 p-sm-3 p-lg-4 d-flex align-items-center\">\r\n    <b-button\r\n      variant=\"link\"\r\n      class=\"text-dark mr-1 mr-lg-0 d-lg-none\">\r\n      <b-icon-arrow-left\r\n        aria-label=\"Revenir à la liste des conversations\"\r\n        font-scale=\"1.5\"\r\n        @click=\"setCurrentConversation(0)\">\r\n      </b-icon-arrow-left>\r\n    </b-button>\r\n    <b-avatar\r\n      :src=\"otherUsers[0].image_url\"\r\n      size=\"2.5rem\"\r\n      class=\"mr-3 bg-transparent\">\r\n    </b-avatar>\r\n    <h2 class=\"h5 m-0\"><span class=\"sr-only\">Conversation avec </span>{{ usersNames }}</h2>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapMutations } from 'vuex';\r\n\r\nexport default {\r\n  name: 'ChatHeader',\r\n  computed: {\r\n    ...mapGetters([\r\n      'userId',\r\n      'currentConversation',\r\n      'allConversations',\r\n    ]),\r\n    otherUsers() {\r\n      const [conversation] = this.allConversations.filter((c) => c.id === this.currentConversation);\r\n      return conversation.Users.filter((u) => u.id !== this.userId);\r\n    },\r\n    usersNames() {\r\n      const names = [];\r\n      this.otherUsers.forEach((u) => names.push(u.user_name));\r\n      return names.join(', ');\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapMutations([\r\n      'setCurrentConversation',\r\n    ]),\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatHeader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatHeader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatHeader.vue?vue&type=template&id=16856a11&\"\nimport script from \"./ChatHeader.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatHeader.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <b-row tag=\"main\" id =\"chat\" class=\"rounded-lg shadow h-100\">\r\n    <!-- users -->\r\n    <b-col\r\n      cols=\"12\"\r\n      lg=\"4\"\r\n      :class=\"{'d-none d-lg-flex': currentConversation, 'd-flex': !currentConversation}\"\r\n      class=\"h-100 border-right flex-column justify-content-between\">\r\n      <!-- users header -->\r\n      <div class=\"d-flex justify-content-between align-items-center p-2\">\r\n        <h1 class=\"h3\">Discussions</h1>\r\n        <b-button class=\"bg-transparent border-0\" v-b-modal.onlineUsers>\r\n          <b-icon-pencil-square\r\n            aria-label=\"Démarrer une conversation avec un collègue\"\r\n            class=\"text-dark\"\r\n            font-scale=\"1.5\">\r\n          </b-icon-pencil-square>\r\n        </b-button>\r\n        <b-modal\r\n          id=\"onlineUsers\"\r\n          title=\"Avec qui voulez-vous discutter ?\"\r\n          hide-footer\r\n          centered\r\n          scrollable\r\n          content-class=\"h-100\">\r\n          <!-- online users -->\r\n          <ChatUser @conversationCreated=\"$bvModal.hide('onlineUsers')\"/>\r\n        </b-modal>\r\n      <!-- Conversations overview -->\r\n      </div>\r\n      <ChatConversations />\r\n    </b-col>\r\n    <!-- chat section -->\r\n    <b-col\r\n      v-if=\"currentConversation !== 0\"\r\n      class=\"h-100 d-flex flex-column justify-content-between align-items-stretch\">\r\n      <ChatHeader />\r\n      <ChatMessages />\r\n      <!-- form message -->\r\n      <form\r\n        @submit=\"sendMessage\"\r\n        class=\"d-flex justify-content-between align-items-center position-relative\">\r\n        <b-form-input\r\n          aria-label=\"Envoyer un nouveau message\"\r\n          v-model=\"message\"\r\n          class=\"my-3 w-100\">\r\n        </b-form-input>\r\n        <b-button type=\"submit\" variant=\"link\" class=\"input__btn\">Envoyer</b-button>\r\n      </form>\r\n    </b-col>\r\n    <b-col\r\n      v-else\r\n      class=\"h-100 d-none d-lg-flex flex-column justify-content-center align-items-center\">\r\n      <h2>Vos messages</h2>\r\n      <p>Créer une nouvelle conversation avec vos collègues </p>\r\n      <b-button\r\n        @click=\"$bvModal.show('onlineUsers')\"\r\n        variant=\"dark\"\r\n        pill>\r\n        Créer une conversation\r\n      </b-button>\r\n    </b-col>\r\n  </b-row>\r\n</template>\r\n\r\n<script>\r\nimport ChatUser from '@/components/Chat/ChatUser.vue';\r\nimport ChatMessages from '@/components/Chat/ChatMessages.vue';\r\nimport ChatConversations from '@/components/Chat/ChatConversations.vue';\r\nimport ChatHeader from '@/components/Chat/ChatHeader.vue';\r\nimport { mapActions, mapGetters, mapMutations } from 'vuex';\r\n\r\nexport default {\r\n  name: 'Chat',\r\n  components: {\r\n    ChatUser,\r\n    ChatMessages,\r\n    ChatConversations,\r\n    ChatHeader,\r\n  },\r\n  data() {\r\n    return {\r\n      message: '',\r\n    };\r\n  },\r\n  watch: {\r\n    currentConversation(newValue) {\r\n      if (this.currentConversation !== 0) {\r\n        this.socket.emit('subscribe', this.currentConversation);\r\n        this.updateConversationAsRead(newValue)\r\n          .then((res) => {\r\n            if (this.unreadCount > 0) {\r\n              const [updatedCount] = res.updated;\r\n              this.setUnreadCount(this.unreadCount - updatedCount);\r\n            }\r\n          });\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'userId',\r\n      'currentConversation',\r\n      'socket',\r\n      'unreadCount',\r\n    ]),\r\n  },\r\n  methods: {\r\n    ...mapActions([\r\n      'fetchUser',\r\n      'fetchAllUsers',\r\n      'createMessage',\r\n      'updateConversationAsRead',\r\n    ]),\r\n    ...mapMutations([\r\n      'setUnreadCount',\r\n    ]),\r\n    sendMessage(e) {\r\n      e.preventDefault();\r\n      this.createMessage({ content: this.message });\r\n      this.message = '';\r\n    },\r\n  },\r\n  mounted() {\r\n    this.fetchUser(this.userId);\r\n    this.fetchAllUsers();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#chat {\r\n  height: 100%;\r\n}\r\n\r\n.input__btn {\r\n  position: absolute;\r\n  right: 10px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chat.vue?vue&type=template&id=12b8a5ea&scoped=true&\"\nimport script from \"./Chat.vue?vue&type=script&lang=js&\"\nexport * from \"./Chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Chat.vue?vue&type=style&index=0&id=12b8a5ea&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"12b8a5ea\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatUser.vue?vue&type=style&index=0&id=ce313674&scoped=true&lang=css&\"","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=style&index=0&id=12b8a5ea&scoped=true&lang=css&\""],"sourceRoot":""}