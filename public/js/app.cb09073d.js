(function(t){function e(e){for(var o,a,i=e[0],c=e[1],l=e[2],u=0,d=[];u<i.length;u++)a=i[u],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&d.push(n[a][0]),n[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);m&&m(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],o=!0,a=1;a<s.length;a++){var i=s[a];0!==n[i]&&(o=!1)}o&&(r.splice(e--,1),t=c(c.s=s[0]))}return t}var o={},a={app:0},n={app:0},r=[];function i(t){return c.p+"js/"+({chat:"chat",personalAccount:"personalAccount",register:"register",user:"user"}[t]||t)+"."+{chat:"b1b78197",personalAccount:"d1be104c",register:"116a2a59",user:"c0225b4e"}[t]+".js"}function c(e){if(o[e])return o[e].exports;var s=o[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.e=function(t){var e=[],s={chat:1,register:1};a[t]?e.push(a[t]):0!==a[t]&&s[t]&&e.push(a[t]=new Promise((function(e,s){for(var o="css/"+({chat:"chat",personalAccount:"personalAccount",register:"register",user:"user"}[t]||t)+"."+{chat:"9d9f12be",personalAccount:"31d6cfe0",register:"f6593e8b",user:"31d6cfe0"}[t]+".css",n=c.p+o,r=document.getElementsByTagName("link"),i=0;i<r.length;i++){var l=r[i],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===o||u===n))return e()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){l=d[i],u=l.getAttribute("data-href");if(u===o||u===n)return e()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=e,m.onerror=function(e){var o=e&&e.target&&e.target.src||n,r=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=o,delete a[t],m.parentNode.removeChild(m),s(r)},m.href=n;var p=document.getElementsByTagName("head")[0];p.appendChild(m)})).then((function(){a[t]=0})));var o=n[t];if(0!==o)if(o)e.push(o[2]);else{var r=new Promise((function(e,s){o=n[t]=[e,s]}));e.push(o[2]=r);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=i(t);var d=new Error;l=function(e){u.onerror=u.onload=null,clearTimeout(m);var s=n[t];if(0!==s){if(s){var o=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",d.name="ChunkLoadError",d.type=o,d.request=a,s[1](d)}n[t]=void 0}};var m=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(e)},c.m=t,c.c=o,c.d=function(t,e,s){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)c.d(s,o,function(e){return t[e]}.bind(null,o));return s},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var m=u;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";s("85ec")},1054:function(t,e,s){"use strict";s("8669")},"14ee":function(t,e,s){},"1f68":function(t,e,s){"use strict";s("c823")},"2dae":function(t,e,s){"use strict";s("14ee")},"3e89":function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ValidationObserver",{ref:"postObserver",attrs:{name:"createPostForm"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.handleSubmit;return[s("b-form",{staticClass:"d-flex flex-column",on:{submit:function(e){return e.preventDefault(),o(t.onSubmit)}}},[s("ValidationProvider",{attrs:{name:"titre",rules:"required|min:20|max:250"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.valid,a=e.errors;return[s("b-form-group",{attrs:{id:"input-group-title",label:"Titre* :","label-for":"title"}},[s("b-form-textarea",{attrs:{id:"title",rows:"3","max-rows":"6",autofocus:"",trim:"",required:"",state:!a[0]&&(!!o||null)},model:{value:t.newPost.title,callback:function(e){t.$set(t.newPost,"title",e)},expression:"newPost.title"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[t._v(" "+t._s(a[0])+" ")])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{name:"sujet",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.valid,a=e.errors;return[s("b-form-group",{attrs:{id:"input-group-subject",label:"Sujet* :","label-for":"subject"}},[s("b-form-select",{attrs:{id:"subject",options:t.options,state:!a[0]&&(!!o||null)},model:{value:t.newPost.subject_id,callback:function(e){t.$set(t.newPost,"subject_id",e)},expression:"newPost.subject_id"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[t._v(" "+t._s(a[0])+" ")])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{name:"image du post",rules:"image"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.valid,a=e.errors;return[s("b-form-group",{attrs:{id:"input-group-postImage",label:"Image :","label-for":"postImage"}},[s("b-form-file",{attrs:{id:"postImage","browse-text":"Parcourir",accept:"image/*",placeholder:"Faites glisser ou sélectionnez une photo","drop-placeholder":"Déposez ici...",state:!a[0]&&(!!o||null)},on:{change:function(e){return t.showPreview(e)}},model:{value:t.newPost.image_url,callback:function(e){t.$set(t.newPost,"image_url",e)},expression:"newPost.image_url"}}),t.previewUrl?s("b-img",{staticClass:"w-100",attrs:{id:"preview",src:t.previewUrl}}):t._e(),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[t._v(" "+t._s(a[0])+" ")])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{name:"url",rules:"url"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.valid,a=e.errors;return[s("b-form-group",{attrs:{id:"input-group-url",label:"Lien :","label-for":"url"}},[s("b-form-input",{attrs:{id:"url",type:"text",trim:"",state:!a[0]&&(!!o||null)},model:{value:t.newPost.url,callback:function(e){t.$set(t.newPost,"url",e)},expression:"newPost.url"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[t._v(" "+t._s(a[0])+" ")])],1)]}}],null,!0)}),s("p",{staticClass:" align-self-end"},[s("small",[t._v("* : obligatoire")])]),s("b-button",{staticClass:"mx-auto w-25",attrs:{type:"submit",variant:"primary"}},[t._v(" Poster ")]),"update"===t.method?s("b-button",{staticClass:"mx-auto w-25 mt-2",attrs:{variant:"danger"},on:{click:function(e){return t.$emit("hide")}}},[t._v(" Annuler ")]):t._e()],1)]}}])})},a=[],n=(s("4160"),s("b0c0"),s("4fad"),s("d3b7"),s("3ca3"),s("159b"),s("ddb0"),s("2b3d"),s("3835")),r=s("5530"),i=s("2f62"),c=s("7bb1"),l={name:"CreatePost",components:{ValidationProvider:c["b"],ValidationObserver:c["a"]},props:["post","method"],data:function(){return{newPost:{title:"",image_url:null,url:"",subject_id:""},previewUrl:null,options:[]}},computed:Object(r["a"])({},Object(i["c"])(["allSubjects","userId","oneUser"])),methods:Object(r["a"])(Object(r["a"])({},Object(i["b"])(["addPost","fetchUser","updatePost"])),{},{subjectListing:function(){var t=this;this.allSubjects.forEach((function(e){var s={value:e.id,text:e.name};t.options.push(s)}))},showPreview:function(t){var e=t.target.files[0];this.previewUrl=URL.createObjectURL(e)},onSubmit:function(){switch(this.method){case"create":this.createPost();break;case"update":this.update();break;default:break}},createPost:function(){var t=this,e=new FormData;e.append("user_id",this.userId),Object.entries(this.newPost).forEach((function(t){var s=Object(n["a"])(t,2),o=s[0],a=s[1];null!==a&&""!==a&&e.append("".concat(o),a)})),this.addPost(e).then((function(){t.newPost.title="",t.newPost.image_url=null,t.newPost.url="",t.newPost.subject_id="",t.$emit("hide")})).catch((function(e){switch(e){case"Validation isUrl on url failed":t.$refs.postObserver.setErrors({url:["Veuillez entrer une url valide"]});break;default:break}return console.error(e)}))},update:function(){var t=this,e=new FormData;e.append("user_id",this.userId),Object.entries(this.newPost).forEach((function(t){var s=Object(n["a"])(t,2),o=s[0],a=s[1];null!==a&&""!==a&&e.append("".concat(o),a)})),this.updatePost({id:this.post.id,data:e}).then((function(){return t.$emit("hide")})).catch((function(e){switch(e){case"Validation isUrl on url failed":t.$refs.postObserver.setErrors({url:["Veuillez entrer une url valide"]});break;default:break}return console.error(e)}))}}),mounted:function(){this.subjectListing(),"update"===this.method&&(this.newPost.title=this.post.title,this.previewUrl=this.post.image_url,this.newPost.url=this.post.url,this.newPost.subject_id=this.post.subject_id)}},u=l,d=s("2877"),m=Object(d["a"])(u,o,a,!1,null,null,null);e["a"]=m.exports},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var o=s("2b0e"),a=s("5f5b"),n=s("b1e0"),r=s("85fe"),i=(s("caad"),s("d3b7"),s("8c4f")),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-row",{attrs:{id:"home"}},[s("h1",{staticClass:"sr-only"},[t._v("Page d'accueil")]),s("b-col",{staticClass:"order-lg-1",attrs:{tag:"aside",cols:"12",lg:"4"}},[s("Sidebar")],1),s("b-col",{staticClass:"order-lg-0",attrs:{tag:"main",cols:"12",lg:"8"}},[s("h2",{staticClass:"sr-only"},[t._v("Fil d'actualités")]),s("SortingNav"),s("div",{staticClass:"shadow bg-white rounded-lg p-4 mb-4 d-flex flex-wrap flex-sm-nowrap align-items-center"},[t.oneUser.image_url?s("b-avatar",{staticClass:"mx-auto mb-3 mb-sm-0 bg-transparent",attrs:{src:t.oneUser.image_url,size:"lg"}}):t._e(),s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.createPost",modifiers:{createPost:!0}}],staticClass:"border-0 w-100 h-100 ml-2 text-left p-3",attrs:{pill:"",variant:"light",size:"lg"}},[t._v(" Que voulez-vous dire "+t._s(t.oneUser.user_name)+" ?")]),s("b-modal",{staticClass:"shadow rounded-lg p-4 mb-4",attrs:{lazy:"",centered:"",id:"createPost",title:"Que voulez vous dire ?","hide-footer":""},model:{value:t.showCreatePostForm,callback:function(e){t.showCreatePostForm=e},expression:"showCreatePostForm"}},[s("PostForm",{attrs:{method:"create"},on:{hide:function(e){t.showCreatePostForm=!1}}})],1)],1),t._l(t.allPosts,(function(t){return s("Post",{key:t.id,attrs:{post:t}})})),t.allPosts.length&&t.allPosts.length<t.postPagination.totalPosts?s("LazyLoadingScroll",{on:{loadMore:function(e){return t.handleFetching(e)}}}):s("p",[t._v("Fin des posts")])],2)],1)},l=[],u=s("5530"),d=s("9c93"),m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-row",{attrs:{"no-gutters":"",id:"sidebar"}},[s("b-col",{staticClass:"p-4 rounded-lg bg-white mb-3 shadow",attrs:{cols:"12"}},[s("h2",{staticClass:"h5 text-muted text-left font-weight-bold mb-3"},[t._v("Top des sujets")]),s("b-list-group",{staticClass:"px-4 px-lg-2 list-unstyled",attrs:{tag:"ol"}},[s("li",t._l(t.topFive,(function(e,o){return s("subject",{key:o,staticClass:"text-dark p-0 text-left",attrs:{subject:e,fill:!0},on:{pressed:function(s){return t.$emit("subjectClick",e.id)}}})})),1)])],1),s("b-col",{staticClass:" p-4 rounded-lg bg-white shadow d-none d-lg-block",attrs:{cols:"12"}},[s("h2",{staticClass:"h5 text-muted text-wrap text-left font-weight-bolder mb-3"},[t._v(" Des collègues qui peuvent vous intéresser ")]),t._l(t.userSuggest,(function(e,o){return s("b-row",{key:o,staticClass:"ml-3 mb-3",attrs:{"no-gutters":"","align-v":"center"}},[e.image_url?s("b-avatar",{staticClass:"rounded-circle mr-3 bg-transparent",attrs:{alt:"Photo de profil de "+e.user_name,src:e.image_url}}):t._e(),s("b-col",{staticClass:"text-left"},[s("p",{staticClass:"h5 mb-0"},[t._v(t._s(e.user_name))]),s("router-link",{staticClass:"h6 text-left",attrs:{to:"/user?id="+e.id}},[t._v("Visiter la page")])],1)],1)}))],2)],1)},p=[],f=(s("4de4"),s("fb6a"),s("2f62")),h=s("fa7e"),b={name:"Sidebar",components:{Subject:h["a"]},computed:Object(u["a"])(Object(u["a"])({},Object(f["c"])(["allSubjects","allUsers"])),{},{userSuggest:function(){var t=this.allUsers;return t.slice(0,7)},topFive:function(){return this.allSubjects.filter((function(t,e){return e<5}))}}),methods:Object(u["a"])({},Object(f["b"])(["fetchAllSubjects","fetchAllUsers","fetchAllPostsBySubject"])),mounted:function(){this.fetchAllSubjects(),this.fetchAllUsers()}},g=b,v=(s("2dae"),s("2877")),P=Object(v["a"])(g,m,p,!1,null,null,null),w=P.exports,C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-nav",{staticClass:"mb-4 bg-white rounded-lg p-2 shadow h5 font-weight-bold py-2",attrs:{pills:"",align:"center"}},[s("b-nav-item",{staticClass:"mx-3",attrs:{active:"top"===t.selected},on:{click:function(e){return t.handleSorting("top")}}},[s("span",{staticClass:"sr-only"},[t._v("Trier les posts par ordre du plus aimé")]),t._v(" Top ")]),s("b-nav-item",{staticClass:"mx-3",attrs:{active:"new"===t.selected},on:{click:function(e){return t.handleSorting("new")}}},[s("span",{staticClass:"sr-only"},[t._v("Trier les posts par ordre du plus récent")]),t._v(" New ")]),s("b-nav-item",{staticClass:"mx-3",attrs:{active:"hot"===t.selected},on:{click:function(e){return t.handleSorting("hot")}}},[s("span",{staticClass:"sr-only"},[t._v("Trier les posts par ordre du plus commenté")]),t._v(" Hot ")])],1)},_=[],j={name:"SortingNav",data:function(){return{selected:"new"}},methods:Object(u["a"])(Object(u["a"])({},Object(f["b"])(["fetchAllPostsByNew","fetchAllPostsByTop","fetchAllPostsByHot"])),{},{handleSorting:function(t){switch(this.selected=t,t){case"new":this.fetchAllPostsByNew(0);break;case"top":this.fetchAllPostsByTop(0);break;case"hot":this.fetchAllPostsByHot(0);break;default:break}}})},y=j,k=Object(v["a"])(y,C,_,!1,null,null,null),O=k.exports,x=s("3e89"),I=s("ffa7"),S={name:"Home",components:{Post:d["a"],Sidebar:w,SortingNav:O,PostForm:x["a"],LazyLoadingScroll:I["a"]},data:function(){return{showCreatePostForm:!1}},computed:Object(u["a"])({},Object(f["c"])(["allPosts","postPagination","userId","allFollows","oneUser","displayBy","displayInformations"])),watch:{allFollows:function(){this.handleFetching(0)}},methods:Object(u["a"])(Object(u["a"])({},Object(f["b"])(["fetchAllPostsByNew","fetchAllPostsByTop","fetchAllPostsByHot","fetchAllPostsByOneSubject","fetchAllPostsByKeyword","getFollows","fetchUser","logout"])),{},{handleFetching:function(t){switch(this.displayBy){case"new":this.fetchAllPostsByNew(t);break;case"top":this.fetchAllPostsByTop(t);break;case"hot":this.fetchAllPostsByHot(t);break;case"subject":this.fetchAllPostsByOneSubject({page:t,id:this.displayInformations});break;case"keyword":this.fetchAllPostsByKeyword({page:t,keyword:this.displayInformations});break;default:break}}}),mounted:function(){this.fetchAllPostsByNew(0),this.getFollows(this.userId),this.fetchUser(this.userId)}},A=S,U=Object(v["a"])(A,c,l,!1,null,null,null),E=U.exports;o["default"].use(i["a"]);var F=[{path:"/",name:"Home",component:E},{path:"/user",name:"User",component:function(){return s.e("user").then(s.bind(null,"1511"))}},{path:"/personal",name:"PersonalAccount",component:function(){return s.e("personalAccount").then(s.bind(null,"42b3"))}},{path:"/register",name:"Register",component:function(){return s.e("register").then(s.bind(null,"73cf"))}},{path:"/chat",name:"Chat",component:function(){return s.e("chat").then(s.bind(null,"293a"))}}],B=new i["a"]({mode:"abstract",base:"/",routes:F});B.beforeEach((function(t,e,s){var o=["/register"],a=!o.includes(t.path),n=localStorage.getItem("user");a&&!n?s("register"):s()}));var M=B,L=(s("99af"),s("4160"),s("a434"),s("ac1f"),s("1276"),s("159b"),s("2909")),$=s("5a0c"),T=s.n($),N=s("4208"),V=s.n(N),z=s("bc3a"),R=s.n(z),D=R.a.create({baseURL:"api",headers:{"Content-type":"application/json"}});function q(){var t=JSON.parse(localStorage.getItem("user"));return t&&t.token?{Authorization:"Bearer ".concat(t.token)}:{}}T.a.extend(V.a);var H=function(){return{posts:[],pagination:{lastPage:"",currentPage:0},displayBy:"new",displayInformations:""}},J={allPosts:function(t){return t.posts},postPagination:function(t){return t.pagination},displayBy:function(t){return t.displayBy},displayInformations:function(t){return t.displayInformations}},K={addPost:function(t,e){var s=t.commit,o=t.dispatch;return D.post("/posts",e,{headers:q()}).then((function(t){return s("newPost",t.data),Promise.resolve(t.data)})).catch((function(t){"Please login"===t.response.data&&o("logout");var e=t.response.data.error.errors[0].message;return Promise.reject(e)}))},updatePost:function(t,e){var s=t.commit,o=t.dispatch,a=e.id,n=e.data;return D.put("/posts/".concat(a),n,{headers:q()}).then((function(t){return s("changePost",t.data),Promise.resolve(t.data)})).catch((function(t){"Please login"===t.response.data&&o("logout");var e=t.response.data.error.errors[0].message;return Promise.reject(e)}))},fetchAllPostsByNew:function(t,e){var s=t.commit,o=t.dispatch,a=JSON.parse(localStorage.getItem("user")),n=a.userId;return D.get("/posts/".concat(n,"?page=").concat(e,"&size=8&order=new"),{headers:q()}).then((function(t){var o={totalPosts:t.data.totalItems,currentPage:t.data.currentPage,lastPage:t.data.totalPages};return s(0===e?"setAllPosts":"addLoadedPosts",t.data.posts),s("setPostPagination",o),s("setDisplay","new"),Promise.resolve(t.data)})).catch((function(t){"Please login"===t.response.data&&o("logout"),Promise.reject(t.response.data)}))},fetchAllPostsByTop:function(t,e){var s=t.commit,o=t.dispatch,a=JSON.parse(localStorage.getItem("user")),n=a.userId;return D.get("/posts/".concat(n,"?page=").concat(e,"&size=8&order=top"),{headers:q()}).then((function(t){var o={totalPosts:t.data.totalItems,currentPage:t.data.currentPage,lastPage:t.data.totalPages};return s(0===e?"setAllPosts":"addLoadedPosts",t.data.posts),s("setPostPagination",o),s("setDisplay","top"),Promise.resolve(t.data)})).catch((function(t){"Please login"===t.response.data&&o("logout"),Promise.reject(t.response.data)}))},fetchAllPostsByHot:function(t,e){var s=t.commit,o=t.dispatch,a=JSON.parse(localStorage.getItem("user")),n=a.userId;return D.get("/posts/".concat(n,"?page=").concat(e,"&size=8&order=hot"),{headers:q()}).then((function(t){var o={totalPosts:t.data.totalItems,currentPage:t.data.currentPage,lastPage:t.data.totalPages};return s(0===e?"setAllPosts":"addLoadedPosts",t.data.posts),s("setPostPagination",o),s("setDisplay","hot"),Promise.resolve(t.data)})).catch((function(t){"Please login"===t.response.data&&o("logout"),Promise.reject(t.response.data)}))},fetchAllPostsByOneSubject:function(t,e){var s=t.commit,o=t.dispatch,a=e.id,n=e.page;return D.get("/posts/subject/".concat(a,"?page=").concat(n,"&size=8"),{headers:q()}).then((function(t){var e={totalPosts:t.data.totalItems,currentPage:t.data.currentPage,lastPage:t.data.totalPages};return s(0===n?"setAllPosts":"addLoadedPosts",t.data.posts),s("setPostPagination",e),s("setDisplay","subject_".concat(a)),Promise.resolve(t.data)})).catch((function(t){"Please login"===t.response.data&&o("logout"),Promise.reject(t.response.data)}))},fetchAllPostsByKeyword:function(t,e){var s=t.commit,o=t.dispatch,a=e.page,n=e.keyword;return D.get("/posts?page=".concat(a,"&size=10&keyword=").concat(n),{headers:q()}).then((function(t){var e={totalPosts:t.data.totalItems,currentPage:t.data.currentPage,lastPage:t.data.totalPages};return s(0===a?"setAllPosts":"addLoadedPosts",t.data.posts),s("setPostPagination",e),s("setDisplay","keyword_".concat(n)),Promise.resolve(t.data)})).catch((function(t){"Please login"===t.response.data&&o("logout"),Promise.reject(t.response.data)}))},fetchAllPostsByOneUser:function(t,e){var s=t.commit,o=t.dispatch,a=e.id,n=e.page;D.get("/posts/user/".concat(a,"?page=").concat(n,"&size=8"),{headers:q()}).then((function(t){var e={totalPosts:t.data.totalItems,currentPage:t.data.currentPage,lastPage:t.data.totalPages};return s(0===n?"setAllPosts":"addLoadedPosts",t.data.posts),s("setPostPagination",e),s("setDisplay","user_".concat(a)),Promise.resolve(t.data)})).catch((function(t){"Please login"===t.response.data&&o("logout"),Promise.reject(t.response.data)}))},removePost:function(t,e){var s=t.commit,o=t.dispatch;return D.delete("/posts/".concat(e),{headers:q()}).then((function(t){return s("removeOnePost",e),Promise.resolve(t.data)})).catch((function(t){"Please login"===t.response.data&&o("logout"),Promise.reject(t.response.data)}))},likePost:function(t,e){var s=t.commit,o=t.dispatch;D.post("/posts/".concat(e,"/like"),{},{headers:q()}).then((function(t){s("addLike",t.data)})).catch((function(t){"Please login"===t.response.data&&o("logout"),Promise.reject(t.response.data)}))},unlikePost:function(t,e){var s=t.commit,o=t.dispatch,a=t.rootGetters;D.delete("/posts/".concat(e,"/unlike"),{headers:q()}).then((function(){var t={UserId:a.userId,PostId:e};s("removeLike",t)})).catch((function(t){"Please login"===t.response.data&&o("logout"),Promise.reject(t.response.data)}))}},G={setDisplay:function(t,e){e.split("_")[1]&&(t.displayInformations=e.split("_")[1]),t.displayBy=e.split("_")[0]},setAllPosts:function(t,e){t.posts=e},addLoadedPosts:function(t,e){var s;(s=t.posts).push.apply(s,Object(L["a"])(e))},setPostPagination:function(t,e){t.pagination=e},newPost:function(t,e){t.posts.unshift(e)},changePost:function(t,e){var s="";t.posts.forEach((function(t,o){t.id===e.id&&(s=o)})),t.posts.splice(s,1,e)},removeOnePost:function(t,e){var s="";t.posts.forEach((function(t,o){t.id===e&&(s=o)})),t.posts.splice(s,1)},addLike:function(t,e){t.posts.forEach((function(t){t.id===parseInt(e.PostId,10)&&t.Likes.push(e)}))},removeLike:function(t,e){t.posts.forEach((function(t){t.id===parseInt(e.PostId,10)&&t.Likes.forEach((function(s,o){s.UserId===e.UserId&&t.Likes.splice(o,1)}))}))}},Q={state:H,getters:J,actions:K,mutations:G},Z=JSON.parse(localStorage.getItem("user")),W=Z?{status:{loggedIn:!0},storedUser:Z}:{status:{loggedIn:!1},storedUser:null},X={state:W,getters:{loggedUser:function(t){return t},userId:function(t){return t.storedUser.userId}},actions:{login:function(t,e){var s=t.commit;return D.post("/users/login",e).then((function(t){return t.data.token&&localStorage.setItem("user",JSON.stringify(t.data)),s("loginSuccess",t.data),Promise.resolve(t.data)})).catch((function(t){s("loginFailure");var e=t.response.data.message;return Promise.reject(e)}))},logout:function(t){var e=t.commit;localStorage.removeItem("user"),e("logout"),document.location.reload()},register:function(t,e){var s=t.commit;return D.post("/users/signup",e).then((function(t){return s("registerSuccess"),Promise.resolve(t.data)})).catch((function(t){s("registerFailure");var e=t.response.data.error.errors[0].message;return Promise.reject(e)}))}},mutations:{loginSuccess:function(t,e){t.status.loggedIn=!0,t.storedUser=e},loginFailure:function(t){t.status.loggedIn=!1,t.storedUser=null},logout:function(t){t.status.loggedIn=!1,t.storedUser=null},registerSuccess:function(t){t.status.loggedIn=!1},registerFailure:function(t){t.status.loggedIn=!1}}},Y={users:[],user:""},tt={allUsers:function(t){return t.users},oneUser:function(t){return t.user}},et={fetchAllUsers:function(t){var e=t.commit,s=t.dispatch;return D.get("/users",{headers:q()}).then((function(t){e("setAllUsers",t.data)})).catch((function(t){return"Please login"===t.response.data&&s("logout"),Promise.reject(t.response.data)}))},fetchUser:function(t,e){var s=t.commit,o=t.dispatch;return D.get("/users/".concat(e),{headers:q()}).then((function(t){s("setUser",t.data)})).catch((function(t){return"Please login"===t.response.data&&o("logout"),Promise.reject(t.response.data)}))},updateUser:function(t,e){var s=t.commit,o=t.dispatch,a=e.id,n=e.data;return D.put("/users/".concat(a),n,{headers:q()}).then((function(t){s("setUser",t.data)})).catch((function(t){return"Please login"===t.response.data&&o("logout"),Promise.reject(t.response.data)}))},updatePassword:function(t,e){var s=t.dispatch,o=e.id,a=e.requestBody;return D.put("/users/".concat(o,"/password"),a,{headers:q()}).then((function(t){return Promise.resolve(t.data)})).catch((function(t){return"Please login"===t.response.data&&s("logout"),Promise.reject(t.response.data)}))},deleteUser:function(t,e){var s=t.dispatch;return D.delete("/users/".concat(e),{headers:q()}).then((function(t){return Promise.resolve(t)})).catch((function(t){return"Please login"===t.response.data&&s("logout"),Promise.reject(t.response.data)}))},exportUser:function(t,e){var s=t.dispatch;return D.get("/users/export/".concat(e),{headers:q(),responseType:"blob"}).then((function(t){return Promise.resolve(t)})).catch((function(t){return"Please login"===t.response.data&&s("logout"),Promise.reject(t.response.data)}))},createReport:function(t,e){var s=t.dispatch;return console.log(e),D.post("/users/report",e,{headers:q()}).then((function(t){return Promise.resolve(t)})).catch((function(t){return"Please login"===t.response.data&&s("logout"),Promise.reject(t.response.data)}))}},st={setAllUsers:function(t,e){t.users=e},setUser:function(t,e){t.user=e}},ot={state:Y,getters:tt,actions:et,mutations:st},at={subjects:[],follows:[]},nt={allSubjects:function(t){return t.subjects},allFollows:function(t){return t.follows},isFollowing:function(t){return t.follows.length>=3}},rt={fetchAllSubjects:function(t){var e=t.commit,s=t.dispatch;return D.get("/subjects",{headers:q()}).then((function(t){return e("setSubjects",t.data),Promise.resolve(t.data)})).catch((function(t){return"Please login"===t.response.data&&s("logout"),Promise.reject(t.response.data)}))},follow:function(t,e){var s=t.commit,o=t.dispatch,a=JSON.parse(localStorage.getItem("user"));return D.post("/subjects/".concat(e,"/follow"),{userId:a.userId},{headers:q()}).then((function(t){return s("newFollow",t.data[0]),Promise.resolve(t.data[0])})).catch((function(t){return"Please login"===t.response.data&&o("logout"),Promise.reject(t.response.data)}))},unFollow:function(t,e){var s=t.commit,o=t.dispatch,a=JSON.parse(localStorage.getItem("user"));return D.post("/subjects/".concat(e,"/unfollow"),{userId:a.userId},{headers:q()}).then((function(t){return s("removeFollow",e),Promise.resolve(t.data)})).catch((function(t){return"Please login"===t.response.data&&o("logout"),Promise.reject(t.response.data)}))},getFollows:function(t,e){var s=t.commit,o=t.dispatch;return D.post("/subjects/follow",{userId:e},{headers:q()}).then((function(t){return s("setFollows",t.data),Promise.resolve(t.data)})).catch((function(t){return"Please login"===t.response.data&&o("logout"),Promise.reject(t.response.data)}))}},it={setSubjects:function(t,e){t.subjects=e},setFollows:function(t,e){t.follows=e},newFollow:function(t,e){t.follows.push(e)},removeFollow:function(t,e){var s="";t.follows.forEach((function(t,o){t.id===e&&(s=o)})),t.follows.splice(s,1)}},ct={state:at,actions:rt,mutations:it,getters:nt},lt=(s("7db0"),function(){return{comments:[]}}),ut={allComments:function(t){return t.comments},CommentsForOnePost:function(t){return function(e){return t.comments.find((function(t){return t.postId===e}))}}},dt={addComment:function(t,e){var s=t.commit,o=t.dispatch;return D.post("/comments/",e,{headers:q()}).then((function(t){return s("addComment",t.data),Promise.resolve(t.data)})).catch((function(t){return"Please login"===t.response.data&&o("logout"),Promise.reject(t.response.data.error.errors[0].message)}))},fetchAllCommentsByPost:function(t,e){var s=t.commit,o=t.dispatch,a=e.id,n=e.page;return D.get("/comments/post/".concat(a,"?page=").concat(n),{headers:q()}).then((function(t){var e=Object(u["a"])(Object(u["a"])({},t.data),{},{postId:a});return s("setComments",e),Promise.resolve(e)})).catch((function(t){return console.log(t),"Please login"===t.response.data&&o("logout"),Promise.reject(t.response.data)}))},updateComment:function(t,e){var s=t.commit,o=t.dispatch,a=e.id,n=e.data;return D.put("/comments/".concat(a),n,{headers:q()}).then((function(t){return s("replaceComment",t.data),Promise.resolve(t.data)})).catch((function(t){return"Please login"===t.response.data&&o("logout"),Promise.reject(t.response.data.error.errors[0].message)}))},deleteComment:function(t,e){var s=t.commit,o=t.dispatch;return D.delete("/comments/".concat(e),{headers:q()}).then((function(t){return s("removeComment",e),Promise.resolve(t.data)})).catch((function(t){return"Please login"===t.response.data&&o("logout"),Promise.reject(t.response.data)}))}},mt={setComments:function(t,e){t.comments.find((function(t){return t.postId===e.postId}))?t.comments.forEach((function(s,o){s.postId===e.postId&&(t.comments[o].comments=[].concat(Object(L["a"])(t.comments[o].comments),Object(L["a"])(e.comments)),t.comments[o].currentPage=e.currentPage)})):t.comments.push(e)},addComment:function(t,e){t.comments.forEach((function(s,o){s.postId===e.post_id&&(s.comments.unshift(e),t.comments[o].totalItems+=1)}))},replaceComment:function(t,e){t.comments.forEach((function(s,o){s.comments.forEach((function(s,a){s.id===e.id&&t.comments[o].comments.splice(a,1,e)}))}))},removeComment:function(t,e){t.comments.forEach((function(s,o){s.comments.forEach((function(s,a){s.id===e&&(t.comments[o].comments.splice(a,1),t.comments[o].totalItems-=1)}))}))}},pt={state:lt,getters:ut,actions:dt,mutations:mt},ft=s("8e27"),ht=function(){return{socket:"",onlineUsers:[],conversations:[],currentConversation:0,unreadMessagesCount:""}},bt={socket:function(t){return t.socket},allOnlineUsers:function(t){return t.onlineUsers},allConversations:function(t){return t.conversations},currentConversation:function(t){return t.currentConversation},unreadCount:function(t){return t.unreadMessagesCount}},gt={createConversation:function(t,e){var s=t.state,o=t.commit,a=t.dispatch;return D.post("/conversations",{users:e},{headers:q()}).then((function(t){return t.data.created&&(s.socket.emit("addNewConversation",t.data.conversation),o("addConversation",t.data.conversation)),o("setCurrentConversation",t.data.conversation.id),a("readAllMessagesByConversation",{conversationId:t.data.conversation.id,page:0}),Promise.resolve(t.data)})).catch((function(t){console.log(t),"Please login"===t.response.data&&a("logout"),Promise.reject(t.response.data)}))},createMessage:function(t,e){var s=t.state,o=t.commit,a=t.dispatch;return D.post("/conversations/".concat(s.currentConversation,"/message"),e,{headers:q()}).then((function(t){return s.socket.emit("message",t.data),o("addOneMessage",t.data),Promise.resolve(t.data)})).catch((function(t){console.log(t),"Please login"===t.response.data&&a("logout"),Promise.reject(t.response.data)}))},getUnreadMessagesCount:function(t){var e=t.commit,s=t.dispatch;return D.get("/conversations/messages/unread",{headers:q()}).then((function(t){e("setUnreadCount",t.data)})).catch((function(t){"Please login"===t.response.data&&s("logout"),Promise.reject(t.response.data)}))},readAllConversations:function(t){var e=t.state,s=t.commit,o=t.dispatch;return D.get("/conversations",{headers:q()}).then((function(t){return t.data.forEach((function(t){e.socket.emit("subscribe",t.id)})),s("setAllConversations",t.data),Promise.resolve(t.data)})).catch((function(t){"Please login"===t.response.data&&o("logout"),Promise.reject(t.response.data)}))},readAllMessagesByConversation:function(t,e){var s=t.commit,o=t.dispatch,a=e.conversationId,n=e.page;return D.get("/conversations/".concat(a,"?page=").concat(n),{headers:q()}).then((function(t){t.data.Messages.length&&s("addMessageArray",t.data)})).catch((function(t){console.log(t),"Please login"===t.response.data&&o("logout"),Promise.reject(t)}))},updateConversationAsRead:function(t,e){var s=t.state,o=t.commit,a=t.dispatch;return D.put("/conversations/".concat(e,"/read"),{},{headers:q()}).then((function(t){return t.data&&t.data.lastRead&&(s.socket.emit("lastMessageRead",t.data.lastRead),o("replaceMessage",t.data),o("markAsRead",e)),Promise.resolve(t.data)})).catch((function(t){console.log(t),"Please login"===t.response.data&&a("logout"),Promise.reject(t)}))},removeParticipant:function(){},deleteConversation:function(){}},vt={setSocket:function(t,e){t.socket=Object(ft["io"])(e)},setOnlineUsers:function(t,e){t.onlineUsers=e},setUnreadCount:function(t,e){t.unreadMessagesCount=e},incrementUnreadCount:function(t){t.unreadMessagesCount+=1},addConversation:function(t,e){t.conversations.push(e)},setCurrentConversation:function(t,e){t.currentConversation=e},setAllConversations:function(t,e){t.conversations=e},addOneMessage:function(t,e){t.conversations.forEach((function(t){t.id===e.ConversationId&&t.Messages.push(e)}))},addMessageArray:function(t,e){t.conversations.forEach((function(t){if(t.id===e.Messages[0].ConversationId){0===e.currentPage&&t.Messages.splice(0,t.Messages.length);var s={totalMessages:e.totalMessages,totalPages:e.totalPages,currentPage:e.currentPage};Object.assign(t,s),e.Messages.forEach((function(e){return t.Messages.unshift(e)}))}}))},replaceMessage:function(t,e){t.conversations.forEach((function(t){t.id===e.ConversationId&&t.Messages.forEach((function(s,o){s.id===e.id&&t.Messages.splice(o,1,e)}))}))},markAsRead:function(t,e){t.conversations.forEach((function(s,o){s.id===e&&s.Messages.forEach((function(e,s){t.conversations[o].Messages[s].read=!0}))}))}},Pt={state:ht,getters:bt,actions:gt,mutations:vt};o["default"].use(f["a"]);var wt=new f["a"].Store({state:{},mutations:{},actions:{},modules:{Post:Q,Auth:X,User:ot,Subject:ct,Comment:pt,Chat:Pt}}),Ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"h-100",attrs:{id:"app"}},[t.isLogged?s("Header"):t._e(),s("b-container",{staticClass:"p-4 h-100"},[s("router-view")],1)],1)},_t=[],jt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"bg-white shadow-sm w-100",attrs:{id:"mainHeader"}},[s("b-container",[s("Navbar")],1)],1)},yt=[],kt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-navbar",{staticClass:"flex-column flex-sm-row"},[o("b-navbar-brand",{attrs:{href:"#",to:"/"}},[o("b-img",{attrs:{fluid:"",width:"220",src:s("a71e"),alt:"Logo de Groupomania"}})],1),o("b-navbar-nav",{staticClass:"w-100 justify-content-center justify-content-sm-end align-items-center"},[o("SearchBar"),o("b-nav-item",{attrs:{to:"/",href:"#"}},[o("b-icon",{attrs:{"aria-label":"Visiter la page d'accueil",icon:"house-door-fill",variant:"dark","font-scale":"1.5",title:"Page d'acceuil"}})],1),o("b-nav-item",{staticClass:"position-relative",attrs:{to:"/chat",href:"#"}},[o("b-icon",{attrs:{"aria-label":"Visiter la messagerie",icon:"chat-dots",variant:"dark","font-scale":"1.5"}}),t.unreadCount>0?o("b-badge",{staticClass:"icon_counter",attrs:{pill:"",variant:"danger"}},[o("span",{staticClass:"sr-only"},[t._v("Vous avez")]),t._v(" "+t._s(t.unreadCount)+" "),o("span",{staticClass:"sr-only"},[t._v("messages en attente d'être lus")])]):t._e()],1),o("b-nav-item-dropdown",{attrs:{right:"","no-caret":""},scopedSlots:t._u([{key:"button-content",fn:function(){return[o("b-icon",{attrs:{"aria-label":"Votre compte",icon:"person-fill",variant:"dark","font-scale":"1.5"}})]},proxy:!0}])},[o("b-dropdown-item",{attrs:{to:"/user?id="+t.userId,href:"#"}},[t._v("Voir votre profil")]),o("b-dropdown-item",{attrs:{to:"/personal",href:"#"}},[t._v("Modifier vos informations")])],1),o("b-nav-item",{on:{click:function(e){return e.preventDefault(),t.logout(e)}}},[o("b-icon",{attrs:{"aria-label":"Se déconnecter",icon:"power",variant:"dark","font-scale":"1.5"}})],1)],1)],1)},Ot=[],xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-nav-form",{staticClass:"mx-md-auto d-none d-md-block w-50",attrs:{id:"searchNav"},on:{submit:function(e){return e.preventDefault(),t.handleSearch()}}},[s("label",{staticClass:"sr-only",attrs:{for:"searchBar"}},[t._v("Rechercher des posts par mots-clefs")]),s("b-form-input",{staticClass:"my-3 my-md-0 w-100",attrs:{id:"searchBar",type:"text",size:"sm"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),s("b-button",{attrs:{type:"submit",size:"sm",variant:"link"}},[t._v(" Rechercher ")])],1)},It=[],St={name:"SearchBar",data:function(){return{keyword:""}},methods:Object(u["a"])(Object(u["a"])({},Object(f["b"])(["displayBy","fetchAllPostsByKeyword"])),{},{handleSearch:function(){"/"!==this.$route.path&&this.$router.push({path:"/"}),this.fetchAllPostsByKeyword({page:0,keyword:this.keyword}),this.keyword=""}})},At=St,Ut=Object(v["a"])(At,xt,It,!1,null,null,null),Et=Ut.exports,Ft={name:"Header",components:{SearchBar:Et},computed:Object(u["a"])({},Object(f["c"])(["userId","unreadCount","socket","currentConversation"])),methods:Object(u["a"])(Object(u["a"])({},Object(f["b"])(["logout","getUnreadMessagesCount","readAllConversations"])),Object(f["d"])(["incrementUnreadCount"])),mounted:function(){this.readAllConversations(),this.getUnreadMessagesCount()}},Bt=Ft,Mt=Object(v["a"])(Bt,kt,Ot,!1,null,null,null),Lt=Mt.exports,$t={name:"Header",components:{Navbar:Lt}},Tt=$t,Nt=(s("88db"),Object(v["a"])(Tt,jt,yt,!1,null,"7a0f36d8",null)),Vt=Nt.exports,zt={name:"App",components:{Header:Vt},watch:{$route:function(t,e){"/chat"===e.path&&"/chat"!==t.path&&0!==this.currentConversation&&this.setCurrentConversation(0)},unreadCount:function(t){document.title=t>0?"(".concat(t,") Groupomania"):"Groupomania"}},computed:Object(u["a"])(Object(u["a"])({},Object(f["c"])(["loggedUser","userId","socket","currentConversation","unreadCount"])),{},{isLogged:function(){return this.loggedUser.status.loggedIn}}),methods:Object(u["a"])(Object(u["a"])({},Object(f["b"])(["updateConversationAsRead","getUnreadMessagesCount"])),Object(f["d"])(["setSocket","setCurrentConversation","setOnlineUsers","addConversation","addOneMessage","replaceMessage","incrementUnreadCount"])),mounted:function(){var t=this;!0===this.loggedUser.status.loggedIn&&(this.setSocket({query:{userId:this.userId}}),this.socket.on("onlineUsers",(function(e){return t.setOnlineUsers(e)})),this.socket.on("newConversation",(function(e){t.addConversation(e),t.socket.emit("subscribe",e.id)})),this.socket.on("message",(function(e){t.addOneMessage(e),t.currentConversation===e.ConversationId?t.updateConversationAsRead(e.ConversationId):t.incrementUnreadCount()})),this.socket.on("lastMessageRead",(function(e){t.replaceMessage(e)})))}},Rt=zt,Dt=(s("034f"),Object(v["a"])(Rt,Ct,_t,!1,null,null,null)),qt=Dt.exports,Ht=(s("89e3"),s("f9e3"),s("2dd8"),s("4d63"),s("25f0"),s("7bb1")),Jt=s("4c93");Object(Ht["d"])("eager"),Object(Ht["c"])("required",Object(u["a"])(Object(u["a"])({},Jt["g"]),{},{message:"Ce champ est obligatoire"})),Object(Ht["c"])("email",Object(u["a"])(Object(u["a"])({},Jt["c"]),{},{message:"Indiquez une adresse mail au bon format"})),Object(Ht["c"])("alpha_num",Object(u["a"])(Object(u["a"])({},Jt["a"]),{},{message:"Indiquez votre {_field_} au bon format"})),Object(Ht["c"])("min",Object(u["a"])(Object(u["a"])({},Jt["f"]),{},{message:"Le {_field_} doit contenir au moins {length} caractères"})),Object(Ht["c"])("max",Object(u["a"])(Object(u["a"])({},Jt["e"]),{},{message:"Le {_field_} doit contenir au maximum {length} caractères"})),Object(Ht["c"])("strongPassword",{validate:function(t){var e=new RegExp(/^(?=.*\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[^\w\d\s:])([^\s]){8,16}$/);return e.test(t)},message:"Votre mot de passe doit contenir au moins 1 majuscule, 1 minuscule, 1 chiffre et 1 charactère spécial"}),Object(Ht["c"])("url",{validate:function(t){var e=new RegExp(/^(http|ftp|https)?(:\/\/)?[\w-]+(\.[\w-]+)+([\w.,@?^!=%&amp;:/~+#-]*[\w@?^=%&amp;/~+#-])+$/);return e.test(t)},message:"Vueillez remplir une url valide"}),Object(Ht["c"])("confirmed",Object(u["a"])(Object(u["a"])({},Jt["b"]),{},{message:"Confirmez votre {_field_}"})),Object(Ht["c"])("image",Object(u["a"])(Object(u["a"])({},Jt["d"]),{},{message:"Il semble que ce fichier n'est pas au bon format"})),Object(Ht["c"])("isDate",{validate:function(t){return T()(t).isValid()},message:"Veuillez entrer une date au bon format "}),Object(Ht["c"])("isPast",{validate:function(t){return T()()>T()(t)},message:"Vous n'êtes pas encore née"}),o["default"].use(a["a"]),o["default"].use(n["a"]),o["default"].use(r["a"]),o["default"].config.productionTip=!1,new o["default"]({router:M,store:wt,render:function(t){return t(qt)}}).$mount("#app")},"85ec":function(t,e,s){},8669:function(t,e,s){},"88db":function(t,e,s){"use strict";s("d34e")},"89e3":function(t,e,s){},"9c93":function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-row",{staticClass:"bg-white rounded-lg shadow p-3 p-sm-4 mb-4",attrs:{"no-gutters":"",tag:"article"}},[t.edit?s("PostForm",{staticClass:"w-100",attrs:{method:"update",post:t.post},on:{hide:function(e){t.edit=!1}}}):s("div",{staticClass:"w-100"},[s("b-col",{staticClass:"mb-2 p-0",attrs:{cols:"12",tag:"header"}},[s("b-row",{attrs:{"no-gutters":"","align-v":"center"}},[t.post.User.image_url?s("b-avatar",{staticClass:"mr-2 mr-sm-4 bg-transparent",attrs:{alt:"Photo de profil de "+t.post.User.user_name,src:t.post.User.image_url,size:"lg"}}):t._e(),s("b-col",{staticClass:"text-left"},[s("router-link",{staticClass:"h5 font-weight-bold text-dark",attrs:{to:"/user?id="+t.post.User.id}},[t._v(" "+t._s(t.post.User.user_name)+" ")]),s("subject",{attrs:{subject:t.post.Subject},on:{pressed:function(e){return t.$emit("pressed",t.post.Subject.id)}}})],1)],1)],1),s("b-col",{staticClass:"my-3 p-0 text-left",attrs:{cols:"12"}},[s("h3",{staticClass:"h4 font-weight-bold text-break"},[t._v(" "+t._s(t.post.title)+" ")]),t.post.image_url?s("b-img",{staticClass:"w-100 my-3",attrs:{fluid:"",alt:t.post.image_url.replace("http://localhost:3000/images/","").split(".")[0].replaceAll("-"," "),src:t.post.image_url}}):t._e(),t.post.url?s("a",{attrs:{target:"_blank",href:t.post.url}},[t._v(t._s(t.post.url))]):t._e(),s("p",{staticClass:"mb-0 text-muted"},[s("small",[t._v(t._s(t.dateToTimestamp(t.post.createdAt)))])])],1),s("b-col",{staticClass:"h2 p-0",attrs:{cols:"12",tag:"footer"}},[s("b-row",{staticClass:"px-0 px-sm-5",attrs:{"align-h":"around"}},[t.isLiked?s("b-button",{staticClass:"bg-white border-0 position-relative",on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.unlikePost(t.post.id)},click:function(e){return t.unlikePost(t.post.id)}}},[s("b-icon",{staticClass:"mx-1 mx-lg-2",attrs:{"aria-label":"Ne plus aimer ce post ce post",icon:"heart-fill",variant:"dark","font-scale":"2"}}),t.post.Likes.length>0?s("b-badge",{staticClass:"icon_counter",attrs:{pill:"",variant:"dark"}},[t._v(" "+t._s(t.post.Likes.length)+" "),s("span",{staticClass:"sr-only"},[t._v(" personnes aiment ce post")])]):t._e()],1):s("b-button",{staticClass:"bg-white border-0 position-relative",on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.likePost(t.post.id)},click:function(e){return t.likePost(t.post.id)}}},[s("b-icon",{staticClass:"mx-1 mx-lg-2",attrs:{"aria-label":"Aimer ce post",icon:"heart",variant:"dark","font-scale":"2"}}),t.post.Likes.length>0?s("b-badge",{staticClass:"icon_counter",attrs:{pill:"",variant:"dark"}},[t._v(" "+t._s(t.post.Likes.length)+" "),s("span",{staticClass:"sr-only"},[t._v(" personnes aiment ce post")])]):t._e()],1),s("b-button",{staticClass:"bg-white border-0 position-relative",on:{click:t.collapse}},[s("b-icon",{staticClass:"mx-1 mx-lg-2",attrs:{"aria-label":"Afficher les commentaires de ce post",icon:"chat-left-text",variant:"dark","font-scale":"2"}}),t.CommentsForOnePost(t.post.id)?s("b-badge",{staticClass:"icon_counter",attrs:{pill:"",variant:"dark"}},[t._v(" "+t._s(t.CommentsForOnePost(t.post.id).totalItems)+" "),s("span",{staticClass:"sr-only"},[t._v(" personnes ont commentées ce post")])]):t.post.Comments.length?s("b-badge",{staticClass:"icon_counter",attrs:{pill:"",variant:"dark"}},[t._v(" "+t._s(t.post.Comments.length)+" "),s("span",{staticClass:"sr-only"},[t._v(" personnes ont commentées ce post")])]):t._e()],1),s("b-dropdown",{attrs:{variant:"link","toggle-class":"text-decoration-none","no-caret":""},scopedSlots:t._u([{key:"button-content",fn:function(){return[s("b-icon",{staticClass:"mx-1 mx-lg-2",attrs:{"aria-label":"Afficher les options de ce post",icon:"three-dots",variant:"dark","font-scale":"2"}})]},proxy:!0}],null,!1,98505227)},[s("b-dropdown-item",{on:{click:function(e){return t.$bvModal.show("reportPost_"+t.post.id)}}},[t._v(" Signaler ")]),s("b-modal",{attrs:{id:"reportPost_"+t.post.id,title:"Rapport de signalement","hide-footer":"",centered:"",lazy:""}},[s("ReportForm",{attrs:{itemType:"post",itemId:t.post.id}})],1),t.isAuthor()?s("b-dropdown-item",{attrs:{href:"#"},on:{click:function(e){t.edit=!0}}},[t._v(" Editer ")]):t._e(),t.isAuthor()?s("b-dropdown-item",{attrs:{href:"#"},on:{click:function(e){return t.remove()}}},[t._v("Supprimer")]):t._e()],1)],1)],1),s("b-collapse",{staticClass:"w-100 mt-2 border-top text-center p-2 p-sm-3 p-md-4",attrs:{id:"commentsFor"+t.post.id},on:{"~show":function(e){return t.fetchAllCommentsByPost({id:t.post.id,page:0})}},model:{value:t.showComments,callback:function(e){t.showComments=e},expression:"showComments"}},[s("Comment",{attrs:{postId:t.post.id}})],1)],1)],1)},a=[],n=(s("45fc"),s("5530")),r=s("5a0c"),i=s.n(r),c=s("e5b7"),l=s.n(c),u=s("4208"),d=s.n(u),m=s("fa7e"),p=s("3e89"),f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("CommentForm",{attrs:{postId:t.postId,method:"create"}}),t._l(t.comments,(function(e,o){return s("b-row",{key:o,staticClass:"mt-sm-3"},[s("b-col",{staticClass:"d-flex flex-wrap flex-column text-left mb-1 order-0",attrs:{cols:"9",sm:"4"}},[s("a",{staticClass:"card-text text-dark font-weight-bold mb-0",attrs:{href:"#"}},[t._v(" "+t._s(e.User.user_name)+" ")]),s("small",[t._v(t._s(t.dateToTimestamp(e.createdAt)))])]),t.edit===e.id?s("b-col",{staticClass:"text-justify order-2 order-sm-1",attrs:{cols:"12",sm:"5"}},[s("CommentForm",{attrs:{postId:e.post_id,method:"update",value:e.content,comment_id:e.id},on:{submited:function(e){return t.switchEdit(!1)}}})],1):s("b-col",{staticClass:"text-justify order-2 order-sm-1",attrs:{tag:"p",cols:"12",sm:"5"}},[t._v(" "+t._s(e.content)+" ")]),s("b-col",{staticClass:"text-right p-0 order-1 order-sm-2",attrs:{cols:"3"}},[s("b-dropdown",{attrs:{variant:"link","toggle-class":"text-decoration-none p-0","no-caret":"",dropright:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[s("b-icon",{staticClass:"mx-1 mx-lg-2",attrs:{icon:"three-dots",variant:"dark","font-scale":"2"}})]},proxy:!0}],null,!0)},[s("b-dropdown-item",{on:{click:function(s){return t.$bvModal.show("reportComment_"+e.id)}}},[t._v(" Signaler ")]),s("b-modal",{attrs:{id:"reportComment_"+e.id,title:"Rapport de signalement","hide-footer":"",centered:"",lazy:""}},[s("ReportForm",{attrs:{itemType:"comment",itemId:e.id}})],1),t.isAuthor(e.user_id)?s("b-dropdown-item",{staticClass:"text-dark",attrs:{href:"#"},on:{click:function(s){return t.switchEdit(e.id)}}},[t._v(" Editer ")]):t._e(),t.isAuthor(e.user_id)?s("b-dropdown-item",{attrs:{href:"#"},on:{click:function(s){return t.handleDelete(e.id)}}},[t._v("Supprimer")]):t._e()],1)],1)],1)})),t.comments.length<t.pagination.totalItems?s("b-button",{attrs:{variant:"link"},on:{click:function(e){return t.loadMoreComments()}}},[t._v(" Voir plus de commentaires ")]):t._e()],2)},h=[],b=(s("7db0"),s("2f62")),g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ValidationObserver",{ref:"commentObserver",attrs:{tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.handleSubmit;return[s("b-form",{staticClass:"d-flex flex-column",on:{submit:function(e){return e.preventDefault(),o(t.onSubmit)}}},[s("ValidationProvider",{attrs:{tag:"div",name:"commentaire"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.valid,a=e.errors;return[s("b-form-group",{attrs:{id:t.comment_id?"group-comment"+t.comment_id:"group-addComment"+t.postId,"label-for":t.comment_id?"comment"+t.comment_id:"addComment"+t.postId,label:"Votre commentaire","label-sr-only":""}},[s("b-form-input",{staticClass:"border-0",attrs:{id:t.comment_id?"comment"+t.comment_id:"addComment"+t.postId,type:"text",trim:"",placeholder:"Proposez un commentaire ...",autofocus:"",state:!a[0]&&(!!o||null)},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[t._v(" "+t._s(a[0])+" ")])],1)]}}],null,!0)}),s("b-button",{staticClass:"mx-auto w-25 commentSubmit",attrs:{type:"submit",variant:"link"}},[t._v(" "+t._s("update"===t.method?"Modifier":"Poster")+" ")])],1)]}}])})},v=[],P=s("7bb1"),w={name:"CommentForm",props:["postId","method","value","comment_id"],components:{ValidationProvider:P["b"],ValidationObserver:P["a"]},data:function(){return{comment:""}},computed:Object(n["a"])({},Object(b["c"])(["userId"])),methods:Object(n["a"])(Object(n["a"])({},Object(b["b"])(["addComment","updateComment"])),{},{onSubmit:function(){var t=this,e={content:this.comment,user_id:this.userId,post_id:this.postId};"update"===this.method?this.updateComment({id:this.comment_id,data:e}).then((function(){t.comment="",t.$emit("submited")})).catch((function(e){switch(e){case"Validation notEmpty on content failed":t.$refs.commentObserver.setErrors({commentaire:["Ce champ ne peux pas être vide"]});break;default:break}return console.error(e)})):"create"===this.method&&this.addComment(e).then((function(){t.comment="",t.$emit("submited"),t.$emit("createdComment")})).catch((function(e){switch(e){case"Validation notEmpty on content failed":t.$refs.commentObserver.setErrors({commentaire:["Ce champ ne peux pas être vide"]});break;default:break}return console.error(e)}))}}),mounted:function(){"update"===this.method&&(this.comment=this.value)}},C=w,_=(s("1f68"),s("2877")),j=Object(_["a"])(C,g,v,!1,null,"f3971af8",null),y=j.exports,k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.created?s("div",{staticClass:"d-flex flex-column align-items-center"},[s("h4",[t._v("Merci de nous avoir signalé ce contenu !")]),s("b-icon-check-circle",{staticClass:"my-4",attrs:{variant:"success","font-scale":"7.5"}}),s("p",[t._v("Nous examinerons votre rapport dans les plus brefs délais")])],1):s("ValidationObserver",{ref:"reportObserver",attrs:{name:"createReportForm"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.handleSubmit;return[s("b-form",{staticClass:"d-flex flex-column",on:{submit:function(e){return e.preventDefault(),o(t.onSubmit)}}},[s("ValidationProvider",{attrs:{name:"message",rules:"required|min:20|max:250"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.valid,a=e.errors;return[s("b-form-group",{attrs:{id:"input-group-message",label:"Message* :","label-for":"message"}},[s("b-form-textarea",{attrs:{id:"message",rows:"3","max-rows":"6",autofocus:"",trim:"",required:"",state:!a[0]&&(!!o||null)},model:{value:t.report.message,callback:function(e){t.$set(t.report,"message",e)},expression:"report.message"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[t._v(" "+t._s(a[0])+" ")])],1)]}}],null,!0)}),s("p",{staticClass:" align-self-end"},[s("small",[t._v("* : obligatoire")])]),s("b-button",{staticClass:"mx-auto w-100",attrs:{type:"submit",variant:"primary"}},[t._v(" Envoyer le signalement ")])],1)]}}],null,!1,3125242362)})],1)},O=[],x={name:"ReportForm",components:{ValidationProvider:P["b"],ValidationObserver:P["a"]},props:["itemId","itemType"],data:function(){return{report:{message:""},created:!1}},methods:Object(n["a"])(Object(n["a"])({},Object(b["b"])(["createReport"])),{},{onSubmit:function(){var t=this,e={item_id:this.itemId,item_type:this.itemType,message:this.report.message};this.createReport(e).then((function(){t.message="",t.created=!0}))}})},I=x,S=Object(_["a"])(I,k,O,!1,null,null,null),A=S.exports;i.a.extend(d.a),i.a.locale(l.a);var U={name:"Comment",components:{CommentForm:y,ReportForm:A},props:["postId"],data:function(){return{edit:!1,showRemove:!1}},computed:Object(n["a"])(Object(n["a"])({},Object(b["c"])(["userId","allComments","CommentsForOnePost"])),{},{comments:function(){var t,e=this,s=this.allComments.find((function(t){return t.postId===e.postId}));return t=s?s.comments:[],t},pagination:function(){var t;if(this.CommentsForOnePost(this.postId)){var e=this.CommentsForOnePost(this.postId),s=e.currentPage,o=e.totalItems,a=e.totalPages;t={currentPage:s,totalItems:o,totalPages:a}}else t={currentPage:0,totalItems:0,totalPages:0};return t}}),methods:Object(n["a"])(Object(n["a"])({},Object(b["b"])(["fetchAllCommentsByPost","deleteComment"])),{},{dateToTimestamp:function(t){return i()(t).fromNow()},isAuthor:function(t){return this.userId===t},switchEdit:function(t){this.edit=t},handleDelete:function(t){this.deleteComment(t)},loadMoreComments:function(){this.fetchAllCommentsByPost({id:this.postId,page:this.pagination.currentPage+1})}})},E=U,F=Object(_["a"])(E,f,h,!1,null,null,null),B=F.exports;i.a.extend(d.a),i.a.locale(l.a);var M={name:"Post",props:["post"],components:{Subject:m["a"],PostForm:p["a"],Comment:B,ReportForm:A},data:function(){return{showComments:!1,edit:!1}},computed:Object(n["a"])(Object(n["a"])({},Object(b["c"])(["userId","CommentsForOnePost"])),{},{isLiked:function(){var t=this;return this.post.Likes.some((function(e){return e.UserId===t.userId}))}}),methods:Object(n["a"])(Object(n["a"])({},Object(b["b"])(["removePost","likePost","unlikePost","fetchAllCommentsByPost"])),{},{isAuthor:function(){return this.userId===this.post.user_id},dateToTimestamp:function(t){return i()(t).fromNow()},collapse:function(){this.showComments=!this.showComments},remove:function(){this.removePost(this.post.id)}})},L=M,$=Object(_["a"])(L,o,a,!1,null,null,null);e["a"]=$.exports},a71e:function(t,e,s){t.exports=s.p+"img/icon-left-font-removebg-cropped.6cd68925.png"},c823:function(t,e,s){},d34e:function(t,e,s){},fa7e:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-list-group-item",{staticClass:"d-flex align-items-center border-0 py-1 px-0",class:{"justify-content-between":t.fill,"justify-content-start":!t.fill},attrs:{tag:"div"}},[s("b-button",{staticClass:"text-dark p-0 text-left text-overflow",attrs:{title:t.subject.name,variant:"link"},on:{click:function(e){return t.fetchAllPostsByOneSubject({page:0,id:t.subject.id})}}},[t._v(" "+t._s(t.subject.name)+" ")]),t.isFollowed?s("b-button",{staticClass:"text-right text-overflow",attrs:{title:"Ne plus suivre",variant:"link"},on:{click:function(e){return t.unFollow(t.subject.id)}}},[t._v("Ne plus suivre")]):s("b-button",{staticClass:"text-right text-overflow",attrs:{title:"Suivre",variant:"link"},on:{click:function(e){return t.follow(t.subject.id)}}},[t._v("Suivre")])],1)},a=[],n=(s("4160"),s("caad"),s("159b"),s("5530")),r=s("2f62"),i={name:"Subject",props:["subject","fill"],computed:Object(n["a"])(Object(n["a"])({},Object(r["c"])(["allFollows","userId"])),{},{isFollowed:function(){var t=[];return this.allFollows.forEach((function(e){t.push(e.id)})),t.includes(this.subject.id)}}),methods:Object(n["a"])({},Object(r["b"])(["getFollows","follow","unFollow","fetchAllPostsByOneSubject","subjectToDisplay"]))},c=i,l=(s("1054"),s("2877")),u=Object(l["a"])(c,o,a,!1,null,"11db0cb6",null);e["a"]=u.exports},ffa7:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:t.handleScrolledToBottom,expression:"handleScrolledToBottom"}]},[s("b-spinner",{staticClass:"d-block my-5 mx-auto",attrs:{label:"Chargement..."}})],1)},a=[],n={name:"LazyLoadingScroll",data:function(){return{page:0}},methods:{handleScrolledToBottom:function(t){t&&(this.page+=1,this.$emit("loadMore",this.page))}}},r=n,i=s("2877"),c=Object(i["a"])(r,o,a,!1,null,null,null);e["a"]=c.exports}});
//# sourceMappingURL=app.cb09073d.js.map