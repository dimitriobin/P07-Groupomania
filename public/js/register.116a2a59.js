(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["register"],{"0549":function(e,t,s){"use strict";s("fc46")},"0996":function(e,t,s){"use strict";s("2c60")},"2c60":function(e,t,s){},"73cf":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"full-height d-flex flex-column justify-content-center"},[a("h1",{staticClass:"sr-only"},[e._v("Inscription et connexion")]),a("b-img",{staticClass:"mx-auto mb-5",attrs:{src:s("b615"),alt:"Logo de groupomania",fluid:"",width:"450"}}),a("b-row",[a("b-col",{staticClass:"mx-auto p-4 shadow rounded",attrs:{cols:"12",sm:"10",md:"8",lg:"6"}},[a("h2",{staticClass:"sr-only"},[e._v("Connexion")]),a("Login",{on:{isLogged:function(t){return e.$bvModal.show("subjectSuggest")}}})],1),a("b-modal",{attrs:{"aria-label":"Formulaire de création d'utilisateur",id:"signupForm",size:"lg",centered:"","hide-header":"","hide-footer":"","body-class":"p-4"}},[a("Signup",{on:{isLogged:function(t){return e.$bvModal.show("subjectSuggest")}}})],1),a("b-modal",{attrs:{id:"subjectSuggest",lazy:"",centered:"",size:"lg","hide-header":"","hide-footer":"","body-class":"p-5"}},[a("SubjectSuggest")],1)],1)],1)},r=[],i=s("5530"),l=s("2f62"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ValidationObserver",{ref:"registerObserver",attrs:{tag:"div"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.handleSubmit;return[s("h2",{staticClass:"text-center mb-4"},[e._v("Rejoignez nous")]),s("b-form",{on:{submit:function(t){return t.preventDefault(),a(e.handleRegister)}}},[s("ValidationProvider",{attrs:{tag:"div",name:"email",rules:"required|email"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{staticClass:"align-items-center",attrs:{id:"registerMail-group",label:"Email :","label-cols":"12","label-cols-lg":"3","label-for":"registerMail"}},[s("b-form-input",{attrs:{id:"registerMail",type:"text",placeholder:"john@mail.com",autofocus:"",trim:"",state:!r[0]&&(!!a||null)},model:{value:e.signup.email,callback:function(t){e.$set(e.signup,"email",t)},expression:"signup.email"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{tag:"div",name:"pseudo",rules:"required|alpha_num"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{staticClass:"align-items-center",attrs:{id:"registerName-group",label:"Pseudo:","label-cols":"12","label-cols-lg":"3","label-for":"registerName"}},[s("b-form-input",{attrs:{id:"registerName",type:"text",placeholder:"John Doe",trim:"",state:!r[0]&&(!!a||null)},model:{value:e.signup.user_name,callback:function(t){e.$set(e.signup,"user_name",t)},expression:"signup.user_name"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{tag:"div",name:"mot de passe",vid:"mdp",rules:"required|min:8|max:16|strongPassword"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{staticClass:"align-items-center",attrs:{id:"registerPass-group",label:"Mot de passe:","label-cols":"12","label-cols-lg":"3","label-for":"registerPass"}},[s("b-form-input",{attrs:{id:"registerPass",type:"password",trim:"",placeholder:"*********************",state:!r[0]&&(!!a||null)},model:{value:e.signup.password,callback:function(t){e.$set(e.signup,"password",t)},expression:"signup.password"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{tag:"div",name:"confirmation",rules:"required|confirmed:mdp"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{staticClass:"align-items-center",attrs:{id:"registerConfirmPass-group",label:"Confirmation du mot de passe:","label-cols":"12","label-cols-lg":"3","label-for":"registerConfirmPass"}},[s("b-form-input",{attrs:{id:"registerConfirmPass",type:"password",placeholder:"*********************",trim:"",state:!r[0]&&(!!a||null)},model:{value:e.signup.confirmation,callback:function(t){e.$set(e.signup,"confirmation",t)},expression:"signup.confirmation"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{tag:"div",name:"photo de profil",rules:"image"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{staticClass:"d-flex align-items-center",attrs:{id:"registerImage-group",label:"Photo de profil:","label-cols":"12","label-cols-lg":"3","label-for":"registerImage"}},[s("b-form-file",{staticClass:" flex-grow-1",attrs:{id:"registerImage","browse-text":"Parcourir",placeholder:"Faites glisser ou sélectionnez une photo","drop-placeholder":"Déposez ici...",accept:"image/*",state:!r[0]&&(!!a||null)},model:{value:e.signup.image_url,callback:function(t){e.$set(e.signup,"image_url",t)},expression:"signup.image_url"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{tag:"div",name:"date de naissance",rules:"required|isDate|isPast"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{staticClass:"align-items-center",attrs:{id:"registerBirthdate-group",label:"Date de naissance:","label-cols":"12","label-cols-lg":"3","label-for":"registerBirthdate"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.signup.birthdate,expression:"signup.birthdate"}],staticClass:"form-control",class:{"is-invalid":r[0],"is-valid":a},attrs:{id:"registerBirthdate",type:"date"},domProps:{value:e.signup.birthdate},on:{input:function(t){t.target.composing||e.$set(e.signup,"birthdate",t.target.value)}}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{tag:"div",name:"email des parents",rules:"email"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{directives:[{name:"show",rawName:"v-show",value:e.userIsMajor,expression:"userIsMajor"}],staticClass:"align-items-center",attrs:{id:"registerParentMail-group",label:"Email des responsables:","label-cols":"12","label-cols-lg":"3","label-for":"registerParentMail"}},[s("b-form-input",{attrs:{id:"registerParentMail",type:"email",placeholder:"parents@mail.com",state:!r[0]&&(!!a||null)},model:{value:e.signup.parentEmail,callback:function(t){e.$set(e.signup,"parentEmail",t)},expression:"signup.parentEmail"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}),s("div",{staticClass:"row"},[s("label",{staticClass:"col-12 col-lg-3 col-form-label"},[e._v("RGPD")]),s("div",{staticClass:"col-12 col-lg-9"},[s("p",{staticClass:"sr-only"},[e._v("Voici un ensemble de cases à cocher pour nous permettre de respecter au mieux vos données d'utilisation.")]),s("b-form-checkbox",{staticClass:"mb-2",model:{value:e.signup.restricted,callback:function(t){e.$set(e.signup,"restricted",t)},expression:"signup.restricted"}},[e._v(" Restreindre l'usage de vos données ")]),s("b-form-checkbox",{staticClass:"mb-2",model:{value:e.signup.shareWithPartners,callback:function(t){e.$set(e.signup,"shareWithPartners",t)},expression:"signup.shareWithPartners"}},[e._v(" Partage de vos données avec nos partenaires ")]),s("b-form-checkbox",{staticClass:"mb-2",model:{value:e.signup.contactable,callback:function(t){e.$set(e.signup,"contactable",t)},expression:"signup.contactable"}},[e._v(" Recevoir des offres de nos partenaires ")])],1)]),s("b-button",{staticClass:"w-100 mt-4",attrs:{type:"submit",variant:"dark"}},[e._v("Suivant")])],1)]}}])})},n=[],u=(s("4160"),s("4fad"),s("159b"),s("3835")),c=s("7bb1"),d=s("5a0c"),m=s.n(d),b=s("4208"),p=s.n(b);m.a.extend(p.a);var g={name:"Signup",components:{ValidationProvider:c["b"],ValidationObserver:c["a"]},data:function(){return{signup:{user_name:"",email:"",password:"",confirmation:"",image_url:null,birthdate:"",parentEmail:null,restricted:!0,shareWithPartners:!1,contactable:!1}}},computed:{userIsMajor:function(){var e=m()(),t=m()(this.signup.birthdate);return e.diff(t,"year")<=18}},methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])(["register","login"])),{},{handleRegister:function(){var e=this,t=new FormData;Object.entries(this.signup).forEach((function(e){var s=Object(u["a"])(e,2),a=s[0],r=s[1];return null!==r?t.append("".concat(a),r):""})),this.register(t).then((function(){var t={email:e.signup.email,password:e.signup.password};e.login(t).then((function(){e.$emit("isLogged")}))})).catch((function(t){switch(t){case"user.user_name must be unique":e.$refs.registerObserver.setErrors({pseudo:["Ce pseudo est déjà utilisé"]});break;case"user.email must be unique":e.$refs.registerObserver.setErrors({email:["Cet email est déjà utilisé"]});break;default:break}return console.error(t)}))}})},f=g,v=s("2877"),h=Object(v["a"])(f,o,n,!1,null,null,null),_=h.exports,w=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ValidationObserver",{ref:"loginObserver",attrs:{tag:"div"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.handleSubmit;return[s("b-form",{on:{submit:function(t){return t.preventDefault(),a(e.handleLogin)}}},[s("ValidationProvider",{attrs:{tag:"div",name:"email",rules:"required|email"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{staticClass:"align-items-center",attrs:{id:"loginMail-group",label:"Email :","label-cols":"12","label-cols-lg":"3","label-for":"loginMail"}},[s("b-form-input",{attrs:{id:"loginMail",type:"text",placeholder:"john@mail.com",autofocus:"",trim:"",state:!r[0]&&(!!a||null)},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"assertive"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{tag:"div",name:"mot de passe",vid:"mdp",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,r=t.errors;return[s("b-form-group",{staticClass:"align-items-center",attrs:{id:"loginPass-group",label:"Mot de passe:","label-cols":"12","label-cols-lg":"3","label-for":"loginPass"}},[s("b-form-input",{attrs:{id:"loginPass",type:"password",trim:"",placeholder:"*********************",state:!r[0]&&(!!a||null)},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),s("b-form-invalid-feedback",{attrs:{"aria-live":"polite"}},[e._v(" "+e._s(r[0])+" ")])],1)]}}],null,!0)}),s("b-button",{staticClass:"w-100",attrs:{type:"submit",variant:"outline-dark"}},[e._v(" Se connecter ")]),s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.signupForm",modifiers:{signupForm:!0}}],staticClass:"w-100 my-3",attrs:{variant:"dark"}},[e._v(" Créer un compte ")])],1)]}}])})},j=[],k={name:"Login",components:{ValidationProvider:c["b"],ValidationObserver:c["a"]},data:function(){return{user:{email:"",password:""}}},computed:Object(i["a"])({},Object(l["c"])(["isFollowing","userId"])),methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])(["register","login","getFollows"])),{},{handleLogin:function(){var e=this,t={};this.user.email&&this.user.password&&(t=Object(i["a"])({},this.user)),this.login(t).then((function(){e.getFollows(e.userId).then((function(){e.isFollowing?document.location.reload():e.$emit("isLogged")}))})).catch((function(t){switch(t){case"Wrong password":e.$refs.loginObserver.setErrors({mdp:["Mot de passe incorrect"]});break;case"User not found":e.$refs.loginObserver.setErrors({email:["Email incorrect"]});break;default:break}return console.error(t)}))}})},x=k,C=Object(v["a"])(x,w,j,!1,null,null,null),P=C.exports,S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-row",{staticClass:"shadow rounded-lg p-4 p-lg-5",attrs:{id:"SubjectSuggest"}},[s("b-col",{attrs:{cols:"12"}},[s("h2",[e._v("Bonjour ")]),s("p",{staticClass:"text-break"},[e._v("Vous ne suivez actuellement aucun sujet de conversation, nous vous proposons une selection de sujets qui pourraient vous correspondre.")]),s("p",{staticClass:"mb-0 text-break"},[e._v("Selectionnez en au moins 3 pour commencer à remplir votre fil de posts et voir ce que vos collègues ont à dire !")])]),s("b-col",{attrs:{cols:"12"}},[s("b-row",{staticClass:"col-12 mx-auto my-5",attrs:{tag:"div",cols:"1"}},e._l(e.allSubjects,(function(e,t){return s("subject",{key:t,attrs:{subject:e}})})),1),s("b-button",{attrs:{disabled:!e.isFollowing,variant:"success"},on:{click:function(t){return e.refresh()}}},[e._v(" Continuer ")])],1)],1)},O=[],y=s("fa7e"),$={name:"SubjectSuggest",components:{Subject:y["a"]},computed:Object(i["a"])({},Object(l["c"])(["allSubjects","isFollowing"])),methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])(["fetchAllSubjects"])),{},{refresh:function(){document.location.reload()}}),mounted:function(){this.fetchAllSubjects()}},E=$,M=(s("0549"),Object(v["a"])(E,S,O,!1,null,"0096873c",null)),V=M.exports,F={name:"Register",components:{Signup:_,Login:P,SubjectSuggest:V},computed:Object(i["a"])(Object(i["a"])({},Object(l["c"])(["loggedUser","allFollows"])),{},{loggedIn:function(){return this.loggedUser.status.loggedIn}}),mounted:function(){this.loggedIn&&this.$router.push({name:"Home"})}},I=F,q=(s("0996"),Object(v["a"])(I,a,r,!1,null,"0e65f858",null));t["default"]=q.exports},b615:function(e,t,s){e.exports=s.p+"img/icon-above-font.571187b7.png"},fc46:function(e,t,s){}}]);
//# sourceMappingURL=register.116a2a59.js.map